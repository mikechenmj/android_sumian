webpackJsonp([12],{UIMx:function(t,e,o){"use strict";var i=o("piuB"),s=(i.b,String,{mounted:function(){var t=this;"development"===Object({BASE_URL:"https://sdapi-test.sumian.com/",ENABLE_V_CONSOLE:!0,WECHAT_APP_ID:"wx6123a0ecf8a4eade"}).NODE_ENV&&this.$nextTick(function(){var e=t.$el,o=window.getComputedStyle(e).position;"fixed"!==o&&"absolute"===o&&document.documentElement.offsetHeight!==window.innerHeight&&console.warn("[VUX warn] tabbar 定位默认为 absolute，如果你没有使用 100% 布局(view-box)，需要手动设置 style position 为 fixed")})},name:"tabbar",mixins:[i.b],props:{iconClass:String}}),n={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"weui-tabbar"},[this._t("default")],2)},staticRenderFns:[]};var a=o("VU/8")(s,n,!1,function(t){o("dVH7")},null,null);e.a=a.exports},ar3x:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Dd8w"),s=o.n(i),n=o("lRwf"),a=o.n(n),r=o("UIMx"),c=o("dgEa"),d=o("63CM"),u=o("HD9R"),l=o("Y52p"),h=o("2sLL"),p=o("NYxO"),f=o("gyMJ"),v=o("mHYM"),_=o("o0rJ"),m=o("SpbH"),b=o.n(m),g=(Object(p.b)({profile:function(t){return t.user.profile}}),d.a,r.a,c.a,u.a,l.a,h.a,{computed:Object(p.b)({profile:function(t){return t.user.profile}}),directives:{TransferDom:d.a},components:{Tabbar:r.a,TabbarItem:c.a,Popup:u.a,XImg:l.a,XButton:h.a},data:function(){return{bindLabel:"绑定为我的主治医生",isBind:!1,doctorId:"",showPopup:!1,doctorInfo:{avatar:"#"},downArrow:b.a,showDetailBtn:!1,showAll:!1}},watch:{showPopup:function(t){var e=this;t&&setTimeout(function(){e.showPopup=!1,e.$router.push({path:"/my-doctor"})},2e3)}},methods:{getDoctorInfo:function(t){var e=this;f.a.get("doctors/"+t,{params:{include:"services"}}).then(function(t){e.doctorInfo=t.data,a.a.nextTick(function(){e.$refs.doc_des.getBoundingClientRect().height>120&&(e.showDetailBtn=!0)})}).catch(function(t){404===t.status_code?e.$vux.toast.text("该二维码已失效","bottom"):e.$vux.toast.text(t.message,"bottom")})},showDetail:function(){this.showAll=!0},tryBindDoctor:function(t){var e=this;this.$store.dispatch("GetUserProfile").then(function(){e.profile.doctor?e.profile.doctor.id===parseInt(e.$route.params.id)?2===Object(v.a)()?Object(_.a)(function(t){t.callHandler("bindDoctorResult",{code:0,message:"已绑定过该医生",result:e.profile.doctor})}):e.$router.push("/my-doctor"):e.$vux.toast.text("您已绑定了其他医生","bottom"):e.bindDoctor(t)})},bindDoctor:function(t){var e=this,o={doctor_id:Number(t)};this.$route.query.openid&&(o.open_id=this.$route.query.openid,o.union_id=this.$route.query.unionid),f.a.patch("doctor-bind",o).then(function(o){var i=o.data;if(i.error)1===i.error.code?e.$vux.toast.text(i.error.user_message,"bottom"):e.$router.push("/my-doctor?doctorId="+t);else{if(2===Object(v.a)())return void Object(_.a)(function(t){t.callHandler("bindDoctorResult",{code:0,message:"绑定成功",result:o.data})});var n=s()({},e.profile);n.doctor=o.data,e.$store.commit("SET_PROFILE",n),e.$vux.toast.text("绑定成功","bottom"),e.$router.push("/my-doctor?doctorId="+t)}}).catch(function(t){403===t.code?(e.isBind=!0,e.$vux.toast.text(t.message,"bottom")):404===t.status_code?e.$vux.toast.text("该二维码已失效","bottom"):e.$vux.toast.text(t.message,"bottom")})},goBackHome:function(){this.$router.push("/")}},created:function(){var t=this;this.doctorId=this.$route.params.id,this.$store.dispatch("GetUserProfile").then(function(){t.profile.doctor&&(t.profile.doctor.id===parseInt(t.$route.params.id)?2===Object(v.a)()?Object(_.a)(function(e){e.callHandler("bindDoctorResult",{code:0,message:"已绑定过该医生",result:t.profile.doctor})}):t.$router.push("/my-doctor"):t.getDoctorInfo(t.doctorId))})}}),x={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.profile?o("div",{staticStyle:{"background-color":"#F2F3F5"}},[o("div",[o("section",[o("div",{staticClass:"header bg_color_white"},[o("div",{staticClass:"box_shadow"},[o("img",{staticClass:"header_img",attrs:{src:t.doctorInfo.avatar}})]),t._v(" "),o("div",{staticClass:"header_right"},[o("h4",{staticClass:"intro_name"},[t._v(t._s(t.doctorInfo.name))]),t._v(" "),o("span",{},[t._v(t._s(t.doctorInfo.hospital)+"  "+t._s(t.doctorInfo.department))])])])])]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"bg_color_white"},[o("div",{ref:"doc_des",class:!t.showAll&&t.showDetailBtn?"desc":"description"},[o("p",{domProps:{innerHTML:t._s(t.doctorInfo.introduction)}}),t._v(" "),t.showDetailBtn&&!t.showAll?o("div",{staticClass:"detail",on:{click:t.showDetail}},[t._v("详细信息"),o("x-img",{attrs:{src:t.downArrow}})],1):t._e()])]),t._v(" "),o("div",{staticClass:"btn_wrapper"},[o("XButton",{staticClass:"bind_btn",attrs:{disabled:t.isBind},nativeOn:{click:function(e){t.tryBindDoctor(t.doctorId)}}},[t._v(t._s(t.bindLabel))])],1),t._v(" "),o("div",{staticClass:"go_back_home",on:{click:t.goBackHome}},[t._m(1)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg_color_white"},[e("div",{staticClass:"title"},[e("span",[this._v("医生简介")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("u",[this._v("回到首页")])])}]};var w=o("VU/8")(g,x,!1,function(t){o("mV34")},"data-v-93d4612c",null);e.default=w.exports},dVH7:function(t,e){},dgEa:function(t,e,o){"use strict";var i=o("piuB"),s=(String,Number,{name:"badge",props:{text:[String,Number]}}),n={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{class:["vux-badge",{"vux-badge-dot":void 0===this.text,"vux-badge-single":void 0!==this.text&&1===this.text.toString().length}],domProps:{textContent:this._s(this.text)}})},staticRenderFns:[]};var a=o("VU/8")(s,n,!1,function(t){o("kgee")},null,null).exports,r=(i.a,Boolean,String,String,Object,String,{name:"tabbar-item",components:{Badge:a},mounted:function(){this.$slots.icon||(this.simple=!0),this.$slots["icon-active"]&&(this.hasActiveIcon=!0)},mixins:[i.a],props:{showDot:{type:Boolean,default:!1},badge:String,link:[String,Object],iconClass:String},computed:{isActive:function(){return this.$parent.index===this.currentIndex}},data:function(){return{simple:!1,hasActiveIcon:!1}}}),c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a",{staticClass:"weui-tabbar__item",class:{"weui-bar__item_on":t.isActive,"vux-tabbar-simple":t.simple},attrs:{href:"javascript:;"},on:{click:function(e){t.onItemClick(!0)}}},[t.simple?t._e():o("div",{staticClass:"weui-tabbar__icon",class:[t.iconClass||t.$parent.iconClass,{"vux-reddot":t.showDot}]},[t.simple||t.hasActiveIcon&&t.isActive?t._e():t._t("icon"),t._v(" "),!t.simple&&t.hasActiveIcon&&t.isActive?t._t("icon-active"):t._e(),t._v(" "),t.badge?o("sup",[o("badge",{attrs:{text:t.badge}})],1):t._e()],2),t._v(" "),o("p",{staticClass:"weui-tabbar__label"},[t._t("label")],2)])},staticRenderFns:[]},d=o("VU/8")(r,c,!1,null,null,null);e.a=d.exports},kgee:function(t,e){},mV34:function(t,e){}});