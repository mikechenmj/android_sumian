webpackJsonp([13,39],{"51nx":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),c=s.n(i),a=s("mvHQ"),r=s.n(a),n=s("rHil"),o=s("1DHf"),l=s("32ER"),p=s("2sLL"),u=s("o0rJ"),d=s("mHYM"),v=s("to2R"),_=s("Xe5u"),h=(l.a,n.a,o.a,p.a,v.a,Object,Object,{name:"introduce",components:{CellBox:l.a,Group:n.a,Cell:o.a,XButton:p.a,SportActionsheet:v.a},props:{service:{type:Object},chapters:{type:Object}},data:function(){return{outlines:this.chapters.data,playerOptions:{muted:!1,sources:[{type:"video/mp4",src:this.service.video}],poster:this.service.picture||s("afU2")},showMake:!0,purchaseShow:!1}},methods:{onPlayerPlay:function(t){this.purchaseShow=!1,this.add(t)},slockTost:function(){this.$vux.toast.text("暂未开放，尽请期待！","middle")},add:function(t){var e=this,s=Object(d.a)();if(sessionStorage.setItem("service",r()(this.service)),this.$store.commit("SET_SELECT_SERVICE",t),2===s)Object(u.a)(function(s){s.callHandler("buyService",{code:0,message:"buyService",result:{service:e.service,packageId:e.service.service_packages[t].id}})});else{var i=window.location.origin+"/pay";Object(_.d)(i)}}},created:function(){}}),b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"introduce"},[s("div",{staticClass:"video",staticStyle:{width:"100vw"}},[0===t.service.banner_type?s("img",{staticStyle:{width:"100%"},attrs:{src:t.service.picture,alt:""}}):t._e(),t._v(" "),1===t.service.banner_type?s("video-player",{staticClass:"vjs-big-play-centere vjs-custom-skin",staticStyle:{width:"7.5rem"},attrs:{options:t.playerOptions},on:{play:function(e){t.onPlayerPlay(e)}}}):t._e(),t._v(" "),t.showMake&&0===t.service.banner_type?s("div",{staticClass:"make"}):t._e()],1),t._v(" "),s("group",[s("cell",{attrs:{title:"课程介绍"}}),t._v(" "),s("cell-box",[s("div",{domProps:{innerHTML:t._s(t.service.description)}})])],1),t._v(" "),s("group",{staticClass:"outline"},[s("cell",{attrs:{title:"课程大纲"}}),t._v(" "),s("cell-box",t._l(t.outlines,function(e){return s("p",{key:e.name},[t._v(t._s(e.title))])}))],1),t._v(" "),0===t.service.service_packages.length?s("x-button",{staticClass:"add-btn",attrs:{type:""},nativeOn:{click:function(e){return t.slockTost(e)}}},[t._v("暂未开放，敬请期待")]):t._e(),t._v(" "),1===t.service.service_packages.length?s("x-button",{staticClass:"add-btn",attrs:{type:"primary"},nativeOn:{click:function(e){t.add(0)}}},[t._v("加入学习("+t._s(t.service.service_packages[0].packages[0].unit_price/100)+"元)")]):t._e(),t._v(" "),t.service.service_packages.length>1?s("x-button",{staticClass:"add-btn",attrs:{type:"primary"},nativeOn:{click:function(e){t.purchaseShow=!0}}},[t._v("加入学习")]):t._e(),t._v(" "),t._m(0),t._v(" "),s("sport-actionsheet",{staticClass:"purchase",attrs:{customMenus:!0},model:{value:t.purchaseShow,callback:function(e){t.purchaseShow=e},expression:"purchaseShow"}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      服务包类型\n    ")]),t._v(" "),t._l(t.service.service_packages,function(e,i){return s("div",{key:e.id,staticClass:"purchase-menu",attrs:{slot:"menus"},on:{click:function(e){t.onPlayerPlay(i)}},slot:"menus"},[s("div",{staticClass:"purchase-title"},[t._v("\n        "+t._s(e.name||"未设置")+"\n      ")]),t._v(" "),s("div",{staticClass:"purchase-introduce"},[t._v("\n        "+t._s(e.introduction||"未设置")+"\n      ")]),t._v(" "),s("div",{staticClass:"price"},[t._v(t._s(e.packages[0].unit_price/100)+"￥")])])})],2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle_process"},[e("div",{staticClass:"wrapper right"},[e("div",{staticClass:"circle rightcircle"})]),this._v(" "),e("div",{staticClass:"wrapper left"},[e("div",{staticClass:"circle leftcircle",attrs:{id:"leftcircle"}})])])}]};var f=s("VU/8")(h,b,!1,function(t){s("FluA")},null,null).exports,m=s("Kb5Z"),g=s("NYxO"),C=(m.default,c()({},Object(g.b)({service:function(t){return t.cbti.service},chapters:function(t){return t.cbti.chapters}})),{name:"cbti",components:{introduce:f,payment:m.default},created:function(){console.log(this.service,this.chapters),this.service||this.$store.dispatch("GetCbtiService").then(function(t){console.log(t)}),this.chapters||this.$store.dispatch("GetCbtiChapters").then(function(t){console.log(t)})},computed:c()({},Object(g.b)({service:function(t){return t.cbti.service},chapters:function(t){return t.cbti.chapters}})),data:function(){return{}}}),y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cbti"},[t.service&&t.chapters&&t.chapters.meta.is_lock?s("introduce",{attrs:{service:t.service,chapters:t.chapters}}):t._e(),t._v(" "),t.service&&t.chapters&&!t.chapters.meta.is_lock?s("payment",{attrs:{chapters:t.chapters,service:t.service}}):t._e()],1)},staticRenderFns:[]};var k=s("VU/8")(C,y,!1,function(t){s("FhRY")},null,null);e.default=k.exports},FhRY:function(t,e){},FluA:function(t,e){},Kb5Z:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),c=s.n(i),a=s("rHil"),r=s("1DHf"),n=s("/AfO"),o=s("o0rJ"),l=s("jNWb"),p=s("mHYM"),u=(a.a,r.a,n.a,l.a,Object,Object,{name:"payment",components:{Group:a.a,Cell:r.a,XCircle:n.a,SleepDialog:l.a},props:{chapters:{type:Object},service:{type:Object}},data:function(){return{dialog:!1,scale_distribution_ids:"",chapter_id:""}},mounted:function(){this.chapters||this.$store.dispatch("GetCbtiChapters").then(function(t){console.log(t)})},methods:{handleOk:function(){this.$router.push("scale-details/scales?scale_id="+this.scale_distribution_ids+"&&chapter_id="+this.chapter_id)},toPush:function(t){var e=Object(p.a)();t.is_lock?t.open_date_text?this.$vux.toast.text(t.open_date_text):this.$vux.toast.text("请完成上周课程"):2===e?""!==t.scale_distribution_ids?(this.dialog=!0,this.scale_distribution_ids=t.scale_distribution_ids,this.chapter_id=t.id):Object(o.a)(function(e){e.callHandler("onCbtiChapterClick",{code:0,message:"onCbtiChapterClick",result:{chapterId:t.id}})}):""!==t.scale_distribution_ids?(this.dialog=!0,this.scale_distribution_ids=t.scale_distribution_ids,this.chapter_id=t.id):this.$router.push("/cbti/section-home?id="+t.id)},introduceStatic:function(){var t=[];this.chapters.data.map(function(e){t.push(e.title)});var e={video_url:this.service.video,chapters:c()(t),description:this.service.description,picture:this.service.picture,banner_type:this.service.banner_type};localStorage.setItem("introduce_data",c()(e)),this.$router.push({path:"/cbti/introduce"})}}}),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"payment"},[s("div",{staticClass:"payment-header",style:{backgroundImage:"url("+t.service.picture+")",backgroundSize:"100% 100%"}},[s("div",{staticClass:"payment-title"},[t._v("\n      "+t._s(t.service.name)+"\n    ")]),t._v(" "),s("div",{staticClass:"payment-introduce"},[t._v("\n      "+t._s(t.service.bought_description)+"\n    ")]),t._v(" "),s("div",{staticClass:"payment-nav"},[s("span",[t._v("\n        "+t._s(t.chapters.meta.total_progress_text)+"\n      ")]),t._v(" "),s("span",{staticClass:"more",on:{click:t.introduceStatic}},[t._v("\n        了解更多 >\n      ")])])]),t._v(" "),s("group",{staticClass:"payment-list"},t._l(t.chapters.data,function(e){return s("cell",{key:e.name,class:{no:e.is_lock},attrs:{"is-link":""},nativeOn:{click:function(s){t.toPush(e)}}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("p",{staticClass:"name"},[t._v(t._s(e.title))]),t._v(" "),e.is_lock||100!==e.chapter_progress?t._e():s("p",{staticClass:"center"},[s("svg-icon",{staticClass:"p-icon",attrs:{"icon-class":"login_icon_selected"}}),t._v(" "),s("span",[t._v("已完成")])],1),t._v(" "),!e.is_lock&&e.chapter_progress<100?s("p",{staticClass:"center"},[s("span",{staticClass:"p-icon"},[s("x-circle",{attrs:{percent:e.chapter_progress,"stroke-width":15,"trail-width":15,"stroke-color":"#6595F4","trail-color":"#dfe1e2"}})],1),t._v(" "),s("span",[t._v("进度："+t._s(e.chapter_progress)+"%")])]):t._e(),t._v(" "),e.is_lock?s("p",{staticClass:"center"},[s("svg-icon",{staticClass:"p-icon",attrs:{"icon-class":"cbti_icon_exerciselock"}}),t._v("\n          "+t._s(e.open_date_text?e.open_date_text:"请先完成上周课程")+"\n        ")],1):t._e()])])})),t._v(" "),s("sleep-dialog",{attrs:{title:"CBTi评估",content:"为更好地追踪治疗效果，我们需要您配合定进行评估，请您耐心完成评估",cancel:!1,submitText:"去评估"},on:{handleOk:t.handleOk},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)},staticRenderFns:[]};var v=s("VU/8")(u,d,!1,function(t){s("nNp2")},null,null);e.default=v.exports},afU2:function(t,e,s){t.exports=s.p+"static/img/img_advisory_banner@2x.6a3bdd5.png"},nNp2:function(t,e){}});