webpackJsonp([17,58],{"7zrw":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Z8XE"),a=s("odqc"),c=s("Znkm"),r=s("rHil"),o=s("1DHf"),n=s("gyMJ"),l=s("NYxO"),u=s("DNL9"),d=s("/kga"),_=s("63CM"),m=(d.a,d.a,_.a,{name:"text-dialog",components:{XDialog:d.a},comments:{XDialog:d.a},directives:{TransferDom:_.a},data:function(){return{show:!1}},props:["isShow","title"],methods:{close:function(){this.$emit("handleHide")}}}),v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("x-dialog",{staticClass:"text-dialog",model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[s("div",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),e._t("default"),e._v(" "),s("div",{staticClass:"close",on:{click:e.close}},[s("svg-icon",{staticClass:"icon-close",attrs:{"icon-class":"record_h5_ icon_delete"}})],1)],2)],1)},staticRenderFns:[]};var h=s("VU/8")(m,v,!1,function(e){s("wKWz")},null,null).exports,p=(Object(l.b)({sectionHomeTab:function(e){return e.cbti.sectionHomeTab}}),i.a,a.a,c.a,r.a,o.a,u.default,{name:"",data:function(){return{chapterId:null,swiperIndex:0,week:{},exercises:{},isLastWeekShow:!1,isSummaryShow:!1,lastWeekSummary:"",summary:"",regardAsDone:!1}},computed:Object(l.b)({sectionHomeTab:function(e){return e.cbti.sectionHomeTab}}),created:function(){this.chapterId=this.$route.query.id,this.getCourses(this.$route.query.id),this.GetExercises(this.$route.query.id),this.swiperIndex=this.sectionHomeTab},watch:{swiperIndex:function(e){this.$store.dispatch("SetSectionHomeTab",e)}},methods:{getCourses:function(e){var t=this;n.a.get("/cbti-chapter/"+e+"/courses").then(function(e){var s=e.data;s.data.map(function(e){var s=t.$moment.duration(1e3*e.duration).minutes(),i=t.$moment.duration(1e3*e.duration).seconds();e.duration=(s<10?"0"+s:s)+":"+(i<10?"0"+i:i)}),t.lastWeekSummary=e.data.meta.last_chapter_summary||"",t.lastWeekSummary=t.lastWeekSummary.replace(/\n/g,"<br>"),t.summary=e.data.meta.chapter.summary||"",t.summary=t.summary.replace(/\n/g,"<br>"),100===e.data.meta.chapter_progress&&(t.regardAsDone=!0),console.log("getCourses",s),t.week=s})},GetExercises:function(e){var t=this;n.a.get("/cbti-chapter/"+e+"/exercises").then(function(e){var s=e.data;console.log("GetExercises",s),t.exercises=s})},goToCurriculum:function(e){e.is_lock?this.$vux.toast.text("完成上节课程后解锁"):this.$router.push({name:"curriculum",query:{id:this.chapterId,cid:e.id}})},goToExercise:function(e){e.is_lock?this.$vux.toast.text("观看课程后解锁"):this.$router.push("/cbti/exercises?id="+e.cbti_course_id)},lastWeekReview:function(){this.isLastWeekShow=!0},showSummary:function(){this.isSummaryShow=!0}},components:{XProgress:i.a,Tab:a.a,TabItem:c.a,Group:r.a,Cell:o.a,TextDialog:h,WeekReview:u.default}}),w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.week.meta&&e.week.data?s("div",{staticClass:"section-home"},[s("div",{staticClass:"section-home-header",style:{backgroundImage:"url("+e.week.meta.chapter.banner+")",backgroundSize:"100% 100%"}},[s("div",{staticClass:"title"},[e._v("\n      "+e._s(e.week.meta.chapter.title)+"\n    ")]),e._v(" "),s("div",{staticClass:"introduce"},[e._v("\n      "+e._s(e.week.meta.chapter.introduction)+"\n    ")]),e._v(" "),s("div",{staticClass:"schedule",class:{over:100===e.week.chapter_progress}},[s("span",{staticClass:"text"},[e._v("课程进度")]),e._v(" "),s("span",{staticClass:"percentage"},[e._v(e._s(e.week.meta.chapter_progress)+"%")]),e._v(" "),s("x-progress",{staticClass:"percent",attrs:{percent:e.week.meta.chapter_progress,"show-cancel":!1}}),e._v(" "),s("div",{staticClass:"over-icon"},[s("svg-icon",{staticClass:"login_icon_selected",attrs:{"icon-class":"login_icon_selected"}}),e._v("\n        已完成\n      ")],1)],1)]),e._v(" "),s("div",{staticClass:"curriculum-tab"},[e.summary&&e.regardAsDone?s("div",{staticClass:"item",on:{click:e.showSummary}},[s("svg-icon",{staticClass:"item-icon",attrs:{"icon-class":"cbti_icon_summary"}}),e._v("\n      "+e._s(e.lastWeekSummary?"":"查看")+"本周总结\n    ")],1):e._e(),e._v(" "),e.lastWeekSummary?s("div",{staticClass:"item",on:{click:e.lastWeekReview}},[s("svg-icon",{staticClass:"item-icon",attrs:{"icon-class":"cbti_icon_review"}}),e._v("\n      上周回顾\n    ")],1):e._e()]),e._v(" "),s("tab",{ref:"tab",attrs:{"line-width":3,"custom-bar-width":"100px","active-color":"#6595F4"},model:{value:e.swiperIndex,callback:function(t){e.swiperIndex=t},expression:"swiperIndex"}},[s("tab-item",{staticClass:"vux-center"},[e._v("课程")]),e._v(" "),s("tab-item",{staticClass:"vux-center"},[e._v("练习")])],1),e._v(" "),s("keep-alive",[0===e.swiperIndex?s("group",{staticClass:"curriculum"},e._l(e.week.data,function(t){return s("div",{key:t.id,on:{click:function(s){e.goToCurriculum(t)}}},[s("cell",{class:[t.is_lock?"slock":"",t.regard_as_done||t.is_lock?"":"ing"]},[s("div",{attrs:{slot:"title"},slot:"title"},[s("p",[e._v(e._s(t.title))]),e._v(" "),s("p",[s("svg-icon",{staticClass:"cbti_icon_time",attrs:{"icon-class":"cbti_icon_time"}}),e._v("\n              "+e._s(t.duration)+"\n            ")],1)]),e._v(" "),t.is_lock?e._e():s("div",[e._v(e._s(t.regard_as_done?"复习":"学习"))]),e._v(" "),t.is_lock?s("div",[s("svg-icon",{staticClass:"cbti_icon_exerciselock",attrs:{"icon-class":"cbti_icon_exerciselock"}})],1):e._e()])],1)})):e._e()],1),e._v(" "),s("keep-alive",[1===e.swiperIndex?s("group",{staticClass:"practice"},e._l(e.exercises.data,function(t){return s("div",{key:t.cbti_course_id,on:{click:function(s){e.goToExercise(t)}}},[s("cell",{class:{no:t.is_lock}},[s("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))]),e._v(" "),!t.is_lock&&t.done?s("div",[s("svg-icon",{staticClass:"icon-ft",staticStyle:{width:".32rem"},attrs:{"icon-class":"cbti_icon_exercisecomplete"}})],1):e._e(),e._v(" "),t.is_lock?s("div",[s("svg-icon",{staticClass:"icon-ft",staticStyle:{width:".36rem",height:".36rem"},attrs:{"icon-class":"cbti_icon_exerciselock"}})],1):e._e()])],1)})):e._e()],1),e._v(" "),s("text-dialog",{attrs:{isShow:e.isSummaryShow,title:"本周回顾"},on:{handleHide:function(t){e.isSummaryShow=!1}}},[s("week-review",{attrs:{review:e.summary}})],1),e._v(" "),s("text-dialog",{attrs:{isShow:e.isLastWeekShow,title:"上周回顾"},on:{handleHide:function(t){e.isLastWeekShow=!1}}},[s("week-review",{attrs:{review:e.lastWeekSummary}})],1)],1):e._e()},staticRenderFns:[]};var k=s("VU/8")(p,w,!1,function(e){s("HNC5")},null,null);t.default=k.exports},DNL9:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"week-review",class:{H5:this.review},domProps:{innerHTML:this._s(this.$route.query.review||this.review)}})},staticRenderFns:[]};var a=s("VU/8")({name:"week-review",props:["review"]},i,!1,function(e){s("Dbg7")},null,null);t.default=a.exports},Dbg7:function(e,t){},HNC5:function(e,t){},wKWz:function(e,t){}});