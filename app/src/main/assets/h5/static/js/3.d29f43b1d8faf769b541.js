webpackJsonp([3],{"+xST":function(e,t){},"4uj0":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("gyMJ"),n=i("Qb34"),s=i("rHil"),o=i("1DHf"),r=i("32ER"),l=(Boolean,Boolean,Boolean,{name:"x-table",props:{fullBordered:Boolean,cellBordered:{type:Boolean,default:!0},contentBordered:{type:Boolean,default:!0}}}),c={render:function(){var e=this.$createElement;return(this._self._c||e)("table",{staticClass:"vux-table",class:{"vux-table-bordered":this.fullBordered,"vux-table-no-cell-bordered":!this.cellBordered,"vux-table-no-content-bordered":!this.contentBordered}},[this._t("default")],2)},staticRenderFns:[]};var u=i("VU/8")(l,c,!1,function(e){i("WGHa")},null,null).exports,d=i("2sLL"),h=i("o0rJ"),p=i("mHYM"),f=i("sE1n"),g=(i("4UDB"),i("Oq2I"),i("80cc"),i("wQkr"),s.a,o.a,r.a,d.a,f.a,{name:"scale-result",components:{Group:s.a,Cell:o.a,CellBox:r.a,XTable:u,XButton:d.a,ECharts:f.a},data:function(){var e=this;return{scaleResult:[],score_type:[],score_table:[],options:{title:{text:"Beijing AQI"},xAxis:{data:[],type:"category",axisLabel:{color:"#878D99",interval:0,formatter:function(t){return e.$moment(t,"YYYY-MM-DD HH:mm:ss").format("YY.MM.DD")}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#EDEFF0"}}},yAxis:{name:"分数",type:"value",nameTextStyle:{color:"#878D99"},minInterval:1,axisTick:{show:!1},axisLabel:{color:"#878D99"},splitLine:{show:!1},axisLine:{lineStyle:{color:"#EDEFF0"}}},dataZoom:[{startValue:"1"},{type:"inside"}],series:{type:"line",symbolSize:8,itemStyle:{normal:{color:"#6595F4"}},label:{show:!0},data:[]}},isEchart:!1}},props:["scaleData"],created:function(){var e=this;if(this.scaleData){if(console.log(this.scaleData),this.scaleData.scaleEchart){this.isEchart=!0;var t=[],i=[];this.scaleData.scaleEchart.forEach(function(e){t.push(e.time),i.push(e.score)}),this.options.xAxis.data=t,this.options.series.data=i}this.scaleData.result.forEach(function(t,i){e.scaleResult.push(t),e.score_type.push(e.scaleData.scale.score_type[i]),e.score_table.push(e.scaleData.scale.comments[i]);var a=e.scaleResult[i].score;e.score_table[i].map(function(e){a>=e.min_score&&a<=e.max_score&&(e.isSelect=!0)}),e.scaleResult[i].updated_at=e.$moment.unix(e.scaleResult[i].updated_at).format("YYYY.MM.DD HH:mm")})}},methods:{returnRouter:function(){2!==Object(p.a)()?this.$router.go(-1):Object(h.a)(function(e){e.callHandler("return",{})})},isQuestion:function(){localStorage.setItem("scaleIndex_"+this.$route.params.id,0),this.$parent.isQuestion="scale"}}}),m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"scale-result"}},[e._l(e.scaleResult,function(t,a){return i("div",{key:t.name},[e.isEchart?i("group",[i("cell",[i("div",{attrs:{slot:"title"},slot:"title"},[e._v("评测统计")]),e._v(" "),1===e.scaleResult.length?i("div",{staticClass:"checkbox-reset",on:{click:e.isQuestion}},[e._v("重填")]):e._e()]),e._v(" "),i("cell-box",[i("e-charts",{staticStyle:{width:"100vw","background-color":"#fff"},attrs:{options:e.options}})],1)],1):e._e(),e._v(" "),i("group",[i("cell",[i("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.isEchart?"近期评测结果":"评测结果"))]),e._v(" "),1!==e.scaleResult.length||e.isEchart?e._e():i("div",{staticClass:"checkbox-reset",on:{click:e.isQuestion}},[e._v("重填")])]),e._v(" "),i("cell-box",[0===e.score_type[a]?i("div",{staticClass:"over"},[i("svg-icon",{staticStyle:{width:"100px",height:"100px"},attrs:{"icon-class":"record_h5_icon_complete"}}),e._v(" "),i("p",[e._v("已完成")])],1):i("div",{staticClass:"result"},[i("p",[e._v(e._s(t.result))]),e._v(" "),i("p",[e._v("评测分数："+e._s(t.score)+"分")])])]),e._v(" "),i("cell-box",[t?i("div",{staticClass:"scale-bottom"},[i("p",[e._v("测评时间："+e._s(t.updated_at))]),e._v(" "),i("p",[e._v("测评建议："+e._s(t.comment))])]):e._e()])],1),e._v(" "),e.score_table[a]&&e.score_table[a].length>0?i("group",[i("cell",[i("div",{attrs:{slot:"title"},slot:"title"},[e._v("测评结果对照表")])]),e._v(" "),i("div",{staticClass:"scale-sore-table"},[i("table",[i("tbody",e._l(e.score_table[a],function(t){return i("tr",{key:t.id,class:{isSelect:t.isSelect}},[i("td",[e._v(e._s(t.result))]),e._v(" "),t.min_score!==t.max_score?i("td",[e._v(e._s(t.min_score+"~"+t.max_score))]):i("td",[e._v(e._s(t.min_score))])])}))])])],1):e._e()],1)}),e._v(" "),1===e.scaleResult.length?i("div",{on:{click:e.returnRouter}},[i("x-button",{staticClass:"submit-btn",attrs:{type:"primary"}},[e._v("完成")])],1):e._e()],2)},staticRenderFns:[]};var v=i("VU/8")(g,m,!1,function(e){i("oaCb")},null,null).exports,_=(n.a,{name:"scale-detail",components:{scaleQuestion:n.a,scaleResult:v},data:function(){return{scaleData:null,submit:!1,scaleType:"",scalesIds:[],isQuestion:null}},computed:{isIndex:function(){if(null!==this.scaleData&&0===this.scaleData.scale_result_id)return!this.submit}},created:function(){"scales"===this.$route.params.id?(this.scaleType="scales",this.getScales()):this.getScaleDistributions()},mounted:function(){},methods:{ready:function(){this.submit=!this.submit,this.isQuestion="scale"},getScales:function(){var e=this;return a.a.get("/scale-distributions-results",{params:{scale_distributions:this.$route.query.scale_id,include:"scale.questions,scale.comments"}}).then(function(t){var i=t.data.data,a=i[0],n=[],s=[],o=[],r=[];e.scalesIds=[],i.forEach(function(t){var i=[];null!==t.result&&(t.result.title=t.scale.title,s.push(t.result),o.push(t.scale.score_type),r.push(t.scale.comments)),t.scale.questions.map(function(e){e.id=e.id+"_"+t.id,i.push({question_id:e.id,answer:""})}),e.scalesIds.push({scale_distribution_id:t.id,answers:i}),n=n.concat(t.scale.questions)}),s.length>0&&(e.isQuestion="result",a.result=s,a.scale.score_type=o,a.scale.comments=r,a.type="scales"),a.scale.questions=n,e.scaleData=a,e.scaleData.questions=n,document.title="CBTI评估报告"})},getResults:function(e){return a.a.get("/scales/"+e,{params:{include:"comments,questions"}})},getScaleDistributions:function(e){var t=this;return this.$route.query.scale_id_v2?this.getResults(this.$route.query.scale_id_v2).then(function(e){console.log(e,"getResults");var i=[],a=[],n=[],s=e.data,o=[];s.scale_distributions.length>1&&s.scale_distributions.forEach(function(e){var i=e.result.score,a=t.$moment.unix(e.result.created_at).format("YYYY-MM-DD HH:mm:ss");o.push({score:i,time:a})});var r=Object(p.d)(o,"time",function(e,t,i){var a=e[i].split(" ")[0],n=null;try{n=t[i].split(" ")[0]}catch(e){n=null}return a===n});o=[],r.forEach(function(e){o.push(e[e.length-1])}),n.push(s.comments),i.push(s.scale_distributions[s.scale_distributions.length-1].result),i[0].updated_at=i[0].created_at,a.push(s.score_type);var l={result:i,scale:{score_type:a,comments:n,questions:s.questions}};o.length>1&&(l.scaleEchart=o),t.isQuestion="result",t.scaleData=l,document.title=s.title}):a.a.get("/scale-distributions/"+(e||this.$route.params.id),{params:{include:"scale.questions,scale.comments"}}).then(function(e){var i=[],a=[],n=[];t.scaleData=e.data,null!==t.scaleData.result&&(i.push(t.scaleData.result),a.push(t.scaleData.scale.score_type),n.push(t.scaleData.scale.comments)),i.length>0&&(t.isQuestion="result",t.scaleData.result=i,t.scaleData.scale.score_type=a,t.scaleData.scale.comments=n),document.title=t.scaleData.scale.title})}}}),x={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{"blue-bg":e.isIndex},attrs:{id:"scale-details"}},[e.isIndex?i("div",{staticClass:"scale-index"},[i("h1",{staticClass:"title"},[e._v("\n      "+e._s(e.scaleData.scale.title)+"\n    ")]),e._v(" "),i("p",{staticClass:"text"},[e._v("\n      "+e._s(e.scaleData.scale.description)+"\n    ")]),e._v(" "),0!==e.scaleData.doctor_id?i("p",{staticClass:"doctor"},[e._v("\n      发放医生："+e._s(e.scaleData.doctor.name)+"\n    ")]):e._e(),e._v(" "),i("div",{staticClass:"submit",on:{click:e.ready}},[e._v("\n      开始评测\n    ")])]):e._e(),e._v(" "),"scale"===e.isQuestion?i("scale-question",{attrs:{scaleQuestionData:e.scaleData.scale.questions,type:e.scaleType,scalesIds:e.scalesIds}}):e._e(),e._v(" "),"result"===e.isQuestion?i("scale-result",{attrs:{scaleData:e.scaleData}}):e._e()],1)},staticRenderFns:[]};var y=i("VU/8")(_,x,!1,function(e){i("+xST")},null,null);t.default=y.exports},"5Hn/":function(e,t,i){var a=i("/gxq"),n=i("UAiw"),s=i("0sHC"),o=i("QD+P"),r=i("ilLo"),l=i("wWR3"),c=i("1Xuh"),u=i("og9+"),d=s.Rect,h=l.linearMap,p=l.asc,f=a.bind,g=a.each,m="horizontal",v=5,_=["line","bar","candlestick","scatter"],x=r.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=t},render:function(e,t,i,a){x.superApply(this,"render",arguments),o.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(a&&"dataZoom"===a.type&&a.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){x.superApply(this,"remove",arguments),o.clear(this,"_dispatchZoomAction")},dispose:function(){x.superApply(this,"dispose",arguments),o.clear(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new s.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,i=this._findCoordRect(),n={width:t.getWidth(),height:t.getHeight()},s=this._orient===m?{right:n.width-i.x-i.width,top:n.height-30-7,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},o=c.getLayoutParams(e.option);a.each(["right","top","width","height"],function(e){"ph"===o[e]&&(o[e]=s[e])});var r=c.getLayoutRect(o,n,e.padding);this._location={x:r.x,y:r.y},this._size=[r.width,r.height],"vertical"===this._orient&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),n=a&&a.get("inverse"),s=this._displayables.barGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i!==m||n?i===m&&n?{scale:o?[-1,1]:[-1,-1]}:"vertical"!==i||n?{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[1,1]:[1,-1]});var r=e.getBoundingRect([s]);e.attr("position",[t.x-r.x,t.y-r.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var e=this.dataZoomModel,t=this._size,i=this._displayables.barGroup;i.add(new d({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40})),i.add(new d({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:a.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,i=e.series,n=i.getRawData(),o=i.getShadowDim?i.getShadowDim():e.otherDim;if(null!=o){var r=n.getDataExtent(o),l=.3*(r[1]-r[0]);r=[r[0]-l,r[1]+l];var c,u=[0,t[1]],d=[0,t[0]],p=[[t[0],0],[0,0]],f=[],g=d[1]/(n.count()-1),m=0,v=Math.round(n.count()/t[0]);n.each([o],function(e,t){if(v>0&&t%v)m+=g;else{var i=null==e||isNaN(e)||""===e,a=i?0:h(e,r,u,!0);i&&!c&&t?(p.push([p[p.length-1][0],0]),f.push([f[f.length-1][0],0])):!i&&c&&(p.push([m,0]),f.push([m,0])),p.push([m,a]),f.push([m,a]),m+=g,c=i}});var _=this.dataZoomModel;this._displayables.barGroup.add(new s.Polygon({shape:{points:p},style:a.defaults({fill:_.get("dataBackgroundColor")},_.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new s.Polyline({shape:{points:f},style:_.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var i,n=this.ecModel;return e.eachTargetAxis(function(s,o){var r=e.getAxisProxy(s.name,o).getTargetSeriesModels();a.each(r,function(e){if(!(i||!0!==t&&a.indexOf(_,e.get("type"))<0)){var r,l=n.getComponent(s.axis,o).axis,c={x:"y",y:"x",radius:"angle",angle:"radius"}[s.name],u=e.coordinateSystem;null!=c&&u.getOtherAxis&&(r=u.getOtherAxis(l).inverse),c=e.getData().mapDimension(c),i={thisAxis:l,series:e,thisDim:s.name,otherDim:c,otherAxisInverse:r}}},this)},this),i}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],i=e.handleLabels=[],a=this._displayables.barGroup,o=this._size,r=this.dataZoomModel;a.add(e.filler=new d({draggable:!0,cursor:y(this._orient),drift:f(this._onDragMove,this,"all"),onmousemove:function(e){n.stop(e.event)},ondragstart:f(this._showDataInfo,this,!0),ondragend:f(this._onDragEnd,this),onmouseover:f(this._showDataInfo,this,!0),onmouseout:f(this._showDataInfo,this,!1),style:{fill:r.get("fillerColor"),textPosition:"inside"}})),a.add(new d(s.subPixelOptimizeRect({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}}))),g([0,1],function(e){var o=s.createIcon(r.get("handleIcon"),{cursor:y(this._orient),draggable:!0,drift:f(this._onDragMove,this,e),onmousemove:function(e){n.stop(e.event)},ondragend:f(this._onDragEnd,this),onmouseover:f(this._showDataInfo,this,!0),onmouseout:f(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),c=o.getBoundingRect();this._handleHeight=l.parsePercent(r.get("handleSize"),this._size[1]),this._handleWidth=c.width/c.height*this._handleHeight,o.setStyle(r.getModel("handleStyle").getItemStyle());var u=r.get("handleColor");null!=u&&(o.style.fill=u),a.add(t[e]=o);var d=r.textStyleModel;this.group.add(i[e]=new s.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:d.getTextColor(),textFont:d.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[h(e[0],[0,100],t,!0),h(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var i=this.dataZoomModel,a=this._handleEnds,n=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),o=[0,100];u(t,a,n,i.get("zoomLock")?"all":e,null!=s.minSpan?h(s.minSpan,o,n,!0):null,null!=s.maxSpan?h(s.maxSpan,o,n,!0):null);var r=this._range,l=this._range=p([h(a[0],n,o,!0),h(a[1],n,o,!0)]);return!r||r[0]!==l[0]||r[1]!==l[1]},_updateView:function(e){var t=this._displayables,i=this._handleEnds,a=p(i.slice()),n=this._size;g([0,1],function(e){var a=t.handles[e],s=this._handleHeight;a.attr({scale:[s/2,s/2],position:[i[e],n[1]/2-s/2]})},this),t.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:n[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,i=this._displayables,a=i.handleLabels,n=this._orient,o=["",""];if(t.get("showDetail")){var r=t.findRepresentativeAxisProxy();if(r){var l=r.getAxisModel().axis,c=this._range,u=e?r.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:r.getDataValueWindow();o=[this._formatLabel(u[0],l),this._formatLabel(u[1],l)]}}var d=p(this._handleEnds.slice());function h(e){var t=s.getTransform(i.handles[e].parent,this.group),r=s.transformDirection(0===e?"right":"left",t),l=this._handleWidth/2+v,c=s.applyTransform([d[e]+(0===e?-l:l),this._size[1]/2],t);a[e].setStyle({x:c[0],y:c[1],textVerticalAlign:n===m?"middle":r,textAlign:n===m?r:"center",text:o[e]})}h.call(this,0),h.call(this,1)},_formatLabel:function(e,t){var i=this.dataZoomModel,n=i.get("labelFormatter"),s=i.get("labelPrecision");null!=s&&"auto"!==s||(s=t.getPixelPrecision());var o=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(s,20));return a.isFunction(n)?n(e,o):a.isString(n)?n.replace("{value}",o):o},_showDataInfo:function(e){e=this._dragging||e;var t=this._displayables.handleLabels;t[0].attr("invisible",!e),t[1].attr("invisible",!e)},_onDragMove:function(e,t,i){this._dragging=!0;var a=this._displayables.barGroup.getLocalTransform(),n=s.applyTransform([t,i],a,!0),o=this._updateInterval(e,n[0]),r=this.dataZoomModel.get("realtime");this._updateView(!r),o&&r&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,i=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(i[0]<0||i[0]>t[0]||i[1]<0||i[1]>t[1])){var a=this._handleEnds,n=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-n);this._updateView(),s&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(g(this.getTargetCoordInfo(),function(t){if(!e&&t.length){var i=t[0].model.coordinateSystem;e=i.getRect&&i.getRect()}}),!e){var t=this.api.getWidth(),i=this.api.getHeight();e={x:.2*t,y:.2*i,width:.6*t,height:.6*i}}return e}});function y(e){return"vertical"===e?"ns-resize":"ew-resize"}var b=x;e.exports=b},"5Mek":function(e,t,i){var a=i("/gxq"),n=i("qjvV"),s=i("UAiw"),o=i("mcsk");function r(e){this.pointerChecker,this._zr=e,this._opt={};var t=a.bind,i=t(l,this),s=t(c,this),o=t(u,this),r=t(d,this),p=t(h,this);n.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(t,n){this.disable(),this._opt=a.defaults(a.clone(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",i),e.on("mousemove",s),e.on("mouseup",o)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",r),e.on("pinch",p))},this.disable=function(){e.off("mousedown",i),e.off("mousemove",s),e.off("mouseup",o),e.off("mousewheel",r),e.off("pinch",p)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function l(e){if(!(s.notLeftMouse(e)||e.target&&e.target.draggable)){var t=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,i)&&(this._x=t,this._y=i,this._dragging=!0)}}function c(e){if(!s.notLeftMouse(e)&&f(this,"moveOnMouseMove",e)&&this._dragging&&"pinch"!==e.gestureEvent&&!o.isTaken(this._zr,"globalPan")){var t=e.offsetX,i=e.offsetY,a=this._x,n=this._y,r=t-a,l=i-n;this._x=t,this._y=i,this._opt.preventDefaultMouseMove&&s.stop(e.event),this.trigger("pan",r,l,a,n,t,i)}}function u(e){s.notLeftMouse(e)||(this._dragging=!1)}function d(e){if(f(this,"zoomOnMouseWheel",e)&&0!==e.wheelDelta){var t=e.wheelDelta>0?1.1:1/1.1;p.call(this,e,t,e.offsetX,e.offsetY)}}function h(e){if(!o.isTaken(this._zr,"globalPan")){var t=e.pinchScale>1?1.1:1/1.1;p.call(this,e,t,e.pinchX,e.pinchY)}}function p(e,t,i,a){this.pointerChecker&&this.pointerChecker(e,i,a)&&(s.stop(e.event),this.trigger("zoom",t,i,a))}function f(e,t,i){var n=e._opt[t];return n&&(!a.isString(n)||i.event[n+"Key"])}a.mixin(r,n);var g=r;e.exports=g},"8Mpj":function(e,t,i){var a=i("sJ4e").extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0}});e.exports=a},E7aA:function(e,t,i){var a=i("/gxq"),n=i("5Mek"),s=i("QD+P"),o=a.curry,r="\0_ec_dataZoom_roams";function l(e){var t=e.getZr();return t[r]||(t[r]={})}function c(e){a.each(e,function(t,i){t.count||(t.controller.dispose(),delete e[i])})}function u(e,t,i,a,n,s,o){h(e,function(r){return r.panGetRange(e.controller,t,i,a,n,s,o)})}function d(e,t,i,a){h(e,function(n){return n.zoomGetRange(e.controller,t,i,a)})}function h(e,t){var i=[];a.each(e.dataZoomInfos,function(e){var a=t(e);!e.disabled&&a&&i.push({dataZoomId:e.dataZoomId,start:a[0],end:a[1]})}),i.length&&e.dispatchAction(i)}function p(e,t){e.dispatchAction({type:"dataZoom",batch:t})}t.register=function(e,t){var i=l(e),r=t.dataZoomId,h=t.coordId;a.each(i,function(e,i){var n=e.dataZoomInfos;n[r]&&a.indexOf(t.allCoordIds,h)<0&&(delete n[r],e.count--)}),c(i);var f=i[h];f||((f=i[h]={coordId:h,dataZoomInfos:{},count:0}).controller=function(e,t){var i=new n(e.getZr());return i.on("pan",o(u,t)),i.on("zoom",o(d,t)),i}(e,f),f.dispatchAction=a.curry(p,e)),!f.dataZoomInfos[r]&&f.count++,f.dataZoomInfos[r]=t;var g,m,v,_,x=(g=f.dataZoomInfos,v={},_={type_true:2,type_move:1,type_false:0,type_undefined:-1},a.each(g,function(e){var t=!e.disabled&&(!e.zoomLock||"move");_["type_"+t]>_["type_"+m]&&(m=t),a.extend(v,e.roamControllerOpt)}),{controlType:m,opt:v});f.controller.enable(x.controlType,x.opt),f.controller.setPointerChecker(t.containsPoint),s.createOrUpdate(f,"dispatchAction",t.throttleRate,"fixRate")},t.unregister=function(e,t){var i=l(e);a.each(i,function(e){e.controller.dispose();var i=e.dataZoomInfos;i[t]&&(delete i[t],e.count--)}),c(i)},t.generateCoordId=function(e){return e.type+"\0_"+e.id}},FdIl:function(e,t){},GWV8:function(e,t,i){var a=i("/gxq"),n=i("wWR3"),s=i("s1Aj"),o=a.each,r=n.asc,l=function(e,t,i,a){this._dimName=e,this._axisIndex=t,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=a,this._dataZoomModel=i};function c(e,t){var i=e.getAxisModel(),a=e._percentWindow,s=e._valueWindow;if(a){var o=n.getPixelPrecision(s,[0,500]);o=Math.min(o,20);var r=t||0===a[0]&&100===a[1];i.setRange(r?null:+s[0].toFixed(o),r?null:+s[1].toFixed(o))}}l.prototype={constructor:l,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(i){if(s.isCoordSupported(i.get("coordinateSystem"))){var a=this._dimName,n=t.queryComponents({mainType:a+"Axis",index:i.get(a+"AxisIndex"),id:i.get(a+"AxisId")})[0];this._axisIndex===(n&&n.componentIndex)&&e.push(i)}},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,i,a=this._dimName,n=this.ecModel,s=this.getAxisModel();return"x"===a||"y"===a?(t="gridIndex",e="x"===a?"y":"x"):(t="polarIndex",e="angle"===a?"radius":"angle"),n.eachComponent(e+"Axis",function(e){(e.get(t)||0)===(s.get(t)||0)&&(i=e)}),i},getMinMaxSpan:function(){return a.clone(this._minMaxSpan)},calculateDataWindow:function(e){var t=this._dataExtent,i=this.getAxisModel().axis.scale,a=this._dataZoomModel.getRangePropMode(),s=[0,100],l=[e.start,e.end],c=[];return o(["startValue","endValue"],function(t){c.push(null!=e[t]?i.parse(e[t]):null)}),o([0,1],function(e){var o=c[e],r=l[e];"percent"===a[e]?(null==r&&(r=s[e]),o=i.parse(n.linearMap(r,s,t,!0))):r=n.linearMap(o,t,s,!0),c[e]=o,l[e]=r}),{valueWindow:r(c),percentWindow:r(l)}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,i){var a=[1/0,-1/0];o(i,function(e){var i=e.getData();i&&o(i.mapDimension(t,!0),function(e){var t=i.getApproximateExtent(e);t[0]<a[0]&&(a[0]=t[0]),t[1]>a[1]&&(a[1]=t[1])})}),a[1]<a[0]&&(a=[NaN,NaN]);return function(e,t){var i=e.getAxisModel(),a=i.getMin(!0),n="category"===i.get("type"),s=n&&i.getCategories().length;null!=a&&"dataMin"!==a&&"function"!=typeof a?t[0]=a:n&&(t[0]=s>0?0:NaN);var o=i.getMax(!0);null!=o&&"dataMax"!==o&&"function"!=typeof o?t[1]=o:n&&(t[1]=s>0?s-1:NaN),i.get("scale",!0)||(t[0]>0&&(t[0]=0),t[1]<0&&(t[1]=0))}(e,a),a}(this,this._dimName,t);var i=this.calculateDataWindow(e.option);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,function(e){var t=e._minMaxSpan={},i=e._dataZoomModel;o(["min","max"],function(a){t[a+"Span"]=i.get(a+"Span");var s=i.get(a+"ValueSpan");if(null!=s&&(t[a+"ValueSpan"]=s,null!=(s=e.getAxisModel().axis.scale.parse(s)))){var o=e._dataExtent;t[a+"Span"]=n.linearMap(o[0]+s,o,[0,100],!0)}})}(this),c(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,c(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var i=this._dimName,a=this.getTargetSeriesModels(),n=e.get("filterMode"),s=this._valueWindow;"none"!==n&&o(a,function(e){var t=e.getData(),a=t.mapDimension(i,!0);"weakFilter"===n?t.filterSelf(function(e){for(var i,n,o,r=0;r<a.length;r++){var l=t.get(a[r],e),c=!isNaN(l),u=l<s[0],d=l>s[1];if(c&&!u&&!d)return!0;c&&(o=!0),u&&(i=!0),d&&(n=!0)}return o&&i&&n}):o(a,function(i){if("empty"===n)e.setData(t.map(i,function(e){return function(e){return e>=s[0]&&e<=s[1]}(e)?e:NaN}));else{var a={};a[i]=s,t.selectRange(a)}}),o(a,function(e){t.setApproximateExtent(s,e)})})}}};var u=l;e.exports=u},KAfT:function(e,t,i){var a=i("Icdr"),n=i("/gxq"),s=i("s1Aj");a.registerAction("dataZoom",function(e,t){var i=s.createLinkedNodesFinder(n.bind(t.eachComponent,t,"dataZoom"),s.eachAxisDim,function(e,t){return e.get(t.axisIndex)}),a=[];t.eachComponent({mainType:"dataZoom",query:e},function(e,t){a.push.apply(a,i(e).nodes)}),n.each(a,function(t,i){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})},Qb34:function(e,t,i){"use strict";var a=i("mvHQ"),n=i.n(a),s=i("0YqE"),o=i("ALGc"),r=i("rHil"),l=i("3BeM"),c=i("gyMJ"),u=i("o0rJ"),d=i("mHYM"),h=(s.a,o.a,r.a,l.a,{name:"scale-question",components:{DatetimeView:s.a,XTextarea:o.a,Group:r.a,ToastPlugin:l.a},data:function(){return{scaleType:0,scaleIndex:0,answers:[],noSubmit:!1,setTimeout:null}},props:["scaleQuestionData","type","scalesIds"],created:function(){console.log(this.scaleQuestionData,"scaleQuestionData")},mounted:function(){var e=this;if(this.scaleQuestionData){this.scaleQuestionData.map(function(t){var i={question_id:t.id,answer:null};1!==t.type&&2!==t.type||(i.answer=t.default_value||"08:00"),e.answers.push(i)}),this.handleScaleType();var t=this.$route.params.id;"scales"===this.$route.params.id&&(t=this.$route.query.scale_id);var i=localStorage.getItem("answers_scale_"+t);i&&(this.answers=JSON.parse(i));var a=localStorage.getItem("scaleIndex_"+t);a&&(this.scaleIndex=JSON.parse(a))}},watch:{scaleIndex:function(e){var t=this.$route.params.id;"scales"===this.$route.params.id&&(t=this.$route.query.scale_id),localStorage.setItem("answers_scale_"+t,n()(this.answers)),localStorage.setItem("scaleIndex_"+t,n()(e))}},methods:{optionSelect:function(e,t){var i=this;this.answers[e].answer=t,this.answers.length!==this.scaleIndex+1&&(this.setTimeout||(this.setTimeout=setTimeout(function(){i.plus()},300)))},handleScaleType:function(){var e=this.scaleQuestionData[this.scaleIndex].type;this.scaleType=e||0,1===this.scaleType&&this.$refs.datetime1&&this.$refs.datetime1.render(),2===this.scaleType&&this.$refs.datetime2&&this.$refs.datetime2.render()},reduce:function(){this.scaleIndex-=1,this.handleScaleType()},plus:function(){this.scaleError()&&(this.scaleIndex+=1,this.handleScaleType(),console.log(this.answers),this.setTimeout=null)},scaleError:function(){if(!this.noSubmit){var e=this.answers[this.scaleIndex].answer;if(null===e||""===e){if(0===this.scaleType)return this.$vux.toast.text("请选择答案","middle"),!1;if(3===this.scaleType)return this.$vux.toast.text("请输入您的回答","middle"),!1}return!0}},submit:function(){var e=this;if(this.scaleError()){if(console.log(this.type,"this.type"),"cbti"===this.type)return void this.$parent.$emit("overFn","scale",this.answers);if("scales"===this.type){var t=JSON.parse(n()(this.scalesIds));t.forEach(function(t){t.answers.forEach(function(t){e.answers.forEach(function(e){t.question_id===e.question_id&&(t.answer=e.answer)})})}),t.forEach(function(e){e.answers.map(function(e){e.question_id=e.question_id.split("_")[0]})});var i={answers:n()(t),chapter_id:this.$route.query.chapter_id};return this.$route.query.cbti_id&&(i.cbti_id=this.$route.query.cbti_id),void c.a.post("/scale-distributions-answers/",i).then(function(t){e.$store.dispatch("GetCbtiChapters").then(function(e){console.log(e)}),console.log(t,"submit res"),2===Object(d.a)()?Object(u.a)(function(i){i.callHandler("scaleFinishFilling",{code:0,message:"成功",result:t.data}),e.$parent.getScales()}):e.$parent.getScales(),e.noSubmit=!1}).catch(function(t){console.log(t),e.noSubmit=!1})}this.noSubmit=!0,c.a.post("/scale-distributions/"+this.$route.params.id+"/answers",{include:0===Number(this.$route.query.scale_result_id)?"scale.questions":"scale.comments",answers:n()(this.answers)}).then(function(t){console.log(t,"submit res");var i=t.data.id;2===Object(d.a)()?Object(u.a)(function(a){a.callHandler("scaleFinishFilling",{code:0,message:"成功",result:t.data}),e.$parent.getScaleDistributions(i)}):e.$parent.getScaleDistributions(i),e.noSubmit=!1}).catch(function(t){console.log(t),e.noSubmit=!1})}}}}),p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.scaleQuestionData?a("div",{attrs:{id:"scale-question"}},[e.scaleQuestionData?a("div",{staticClass:"question-title"},[e._v("\n    "+e._s(e.scaleQuestionData[e.scaleIndex].question)+"\n  ")]):e._e(),e._v(" "),a("div",{staticClass:"question-body"},[0===e.scaleType?a("div",{staticClass:"type-0"},[a("div",{staticClass:"options-list",class:{"center-list":!0}},e._l(e.scaleQuestionData[e.scaleIndex].options,function(t){return a("div",{key:t.id,staticClass:"option",on:{click:function(i){e.optionSelect(e.scaleIndex,t.id)}}},[a("svg-icon",{staticClass:"icon-selected",class:e.answers[e.scaleIndex].answer!==t.id?"":"active",attrs:{"icon-class":e.answers[e.scaleIndex].answer!==t.id?"login_icon_unselected":"login_icon_selected"}}),e._v("\n          "+e._s(t.content)+"\n        ")],1)}))]):e._e(),e._v(" "),1===e.scaleType?a("div",{staticClass:"type-1"},[a("DatetimeView",{ref:"datetime1",attrs:{format:"HH:mm"},model:{value:e.answers[e.scaleIndex].answer,callback:function(t){e.$set(e.answers[e.scaleIndex],"answer",t)},expression:"answers[scaleIndex].answer"}})],1):e._e(),e._v(" "),2===e.scaleType?a("div",{staticClass:"type-2"},[a("DatetimeView",{ref:"datetime2",attrs:{format:"HH:mm"},model:{value:e.answers[e.scaleIndex].answer,callback:function(t){e.$set(e.answers[e.scaleIndex],"answer",t)},expression:"answers[scaleIndex].answer"}})],1):e._e(),e._v(" "),e.scaleQuestionData&&3===e.scaleType?a("div",{staticClass:"type-3"},[a("div",{staticClass:"title"},[e._v("填写说明")]),e._v(" "),a("x-textarea",{attrs:{max:200,placeholder:"可在此处描述您的详细情况（200字以内）","show-counter":!1},model:{value:e.answers[e.scaleIndex].answer,callback:function(t){e.$set(e.answers[e.scaleIndex],"answer",t)},expression:"answers[scaleIndex].answer"}})],1):e._e(),e._v(" "),a("div",{staticClass:"jump-btn"},[a("div",{staticClass:"btn-left"},[e.scaleIndex>0?a("img",{attrs:{src:i("mhLV"),alt:""},on:{click:e.reduce}}):e._e()]),e._v(" "),a("div",{staticClass:"btn-submit"},[e.scaleQuestionData&&e.scaleIndex===e.scaleQuestionData.length-1?a("div",{on:{click:e.submit}},[e._v("\n          生成报告\n        ")]):a("p",[e._v("\n          "+e._s(e.scaleIndex+1)+"/"+e._s(e.scaleQuestionData.length)+"\n        ")])]),e._v(" "),a("div",{staticClass:"btn-right"},[e.scaleQuestionData&&e.scaleIndex<e.scaleQuestionData.length-1?a("img",{attrs:{src:i("UQqC"),alt:""},on:{click:e.plus}}):e._e()])])])]):e._e()},staticRenderFns:[]};var f=i("VU/8")(h,p,!1,function(e){i("FdIl")},null,null);t.a=f.exports},WGHa:function(e,t){},WbrJ:function(e,t,i){var a=i("/gxq"),n=i("ilLo"),s=i("og9+"),o=i("E7aA"),r=a.bind,l=n.extend({type:"dataZoom.inside",init:function(e,t){this._range},render:function(e,t,i,n){l.superApply(this,"render",arguments),this._range=e.getPercentRange(),a.each(this.getTargetCoordInfo(),function(t,n){var s=a.map(t,function(e){return o.generateCoordId(e.model)});a.each(t,function(t){var a=t.model,l=e.option;o.register(i,{coordId:o.generateCoordId(a),allCoordIds:s,containsPoint:function(e,t,i){return a.coordinateSystem.containPoint([t,i])},dataZoomId:e.id,throttleRate:e.get("throttle",!0),panGetRange:r(this._onPan,this,t,n),zoomGetRange:r(this._onZoom,this,t,n),zoomLock:l.zoomLock,disabled:l.disabled,roamControllerOpt:{zoomOnMouseWheel:l.zoomOnMouseWheel,moveOnMouseMove:l.moveOnMouseMove,preventDefaultMouseMove:l.preventDefaultMouseMove}})},this)},this)},dispose:function(){o.unregister(this.api,this.dataZoomModel.id),l.superApply(this,"dispose",arguments),this._range=null},_onPan:function(e,t,i,a,n,o,r,l,u){var d=this._range,h=d.slice(),p=e.axisModels[0];if(p){var f=c[t]([o,r],[l,u],p,i,e),g=f.signal*(h[1]-h[0])*f.pixel/f.pixelLength;return s(g,h,[0,100],"all"),this._range=h,d[0]!==h[0]||d[1]!==h[1]?h:void 0}},_onZoom:function(e,t,i,a,n,o){var r=this._range,l=r.slice(),u=e.axisModels[0];if(u){var d=c[t](null,[n,o],u,i,e),h=(d.signal>0?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(l[1]-l[0])+l[0];a=Math.max(1/a,0),l[0]=(l[0]-h)*a+h,l[1]=(l[1]-h)*a+h;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return s(0,l,[0,100],0,p.minSpan,p.maxSpan),this._range=l,r[0]!==l[0]||r[1]!==l[1]?l:void 0}}}),c={grid:function(e,t,i,a,n){var s=i.axis,o={},r=n.model.coordinateSystem.getRect();return e=e||[0,0],"x"===s.dim?(o.pixel=t[0]-e[0],o.pixelLength=r.width,o.pixelStart=r.x,o.signal=s.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=r.height,o.pixelStart=r.y,o.signal=s.inverse?-1:1),o},polar:function(e,t,i,a,n){var s=i.axis,o={},r=n.model.coordinateSystem,l=r.getRadiusAxis().getExtent(),c=r.getAngleAxis().getExtent();return e=e?r.pointToCoord(e):[0,0],t=r.pointToCoord(t),"radiusAxis"===i.mainType?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=s.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=c[1]-c[0],o.pixelStart=c[0],o.signal=s.inverse?-1:1),o},singleAxis:function(e,t,i,a,n){var s=i.axis,o=n.model.coordinateSystem.getRect(),r={};return e=e||[0,0],"horizontal"===s.orient?(r.pixel=t[0]-e[0],r.pixelLength=o.width,r.pixelStart=o.x,r.signal=s.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=o.height,r.pixelStart=o.y,r.signal=s.inverse?-1:1),r}},u=l;e.exports=u},"b/SY":function(e,t,i){var a=i("Icdr"),n=i("/gxq"),s=n.createHashMap,o=n.each;a.registerProcessor({getTargetSeries:function(e){var t=s();return e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(e,i,a){var n=a.getAxisProxy(e.name,i);o(n.getTargetSeriesModels(),function(e){t.set(e.uid,e)})})}),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(e,i,a){a.getAxisProxy(e.name,i).reset(a,t)}),e.eachTargetAxis(function(e,i,a){a.getAxisProxy(e.name,i).filterData(a,t)})}),e.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy(),i=t.getDataPercentWindow(),a=t.getDataValueWindow();e.setRawRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]},!0)})}})},"cuL/":function(e,t,i){i("Y5nL").registerSubTypeDefaulter("dataZoom",function(){return"slider"})},envY:function(e,t,i){var a=i("sJ4e").extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});e.exports=a},ilLo:function(e,t,i){var a=i("Pgdp").extend({type:"dataZoom",render:function(e,t,i,a){this.dataZoomModel=e,this.ecModel=t,this.api=i},getTargetCoordInfo:function(){var e=this.dataZoomModel,t=this.ecModel,i={};return e.eachTargetAxis(function(e,a){var n=t.getComponent(e.axis,a);if(n){var s=n.getCoordSysModel();s&&function(e,t,i,a){for(var n,s=0;s<i.length;s++)if(i[s].model===e){n=i[s];break}n||i.push(n={model:e,axisModels:[],coordIndex:a});n.axisModels.push(t)}(s,n,i[s.mainType]||(i[s.mainType]=[]),s.componentIndex)}},this),i}});e.exports=a},mcsk:function(e,t,i){var a="\0_ec_interaction_mutex";function n(e){return e[a]||(e[a]={})}i("Icdr").registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),t.take=function(e,t,i){n(e)[t]=i},t.release=function(e,t,i){var a=n(e);a[t]===i&&(a[t]=null)},t.isTaken=function(e,t){return!!n(e)[t]}},oaCb:function(e,t){},"og9+":function(e,t){function i(e,t){var i=e[t]-e[1-t];return{span:Math.abs(i),sign:i>0?-1:i<0?1:t?-1:1}}function a(e,t){return Math.min(t[1],Math.max(t[0],e))}e.exports=function(e,t,n,s,o,r){t[0]=a(t[0],n),t[1]=a(t[1],n),e=e||0;var l=n[1]-n[0];null!=o&&(o=a(o,[0,l])),null!=r&&(r=Math.max(r,null!=o?o:0)),"all"===s&&(o=r=Math.abs(t[1]-t[0]),s=0);var c=i(t,s);t[s]+=e;var u=o||0,d=n.slice();c.sign<0?d[0]+=u:d[1]-=u,t[s]=a(t[s],d);var h=i(t,s);return null!=o&&(h.sign!==c.sign||h.span<o)&&(t[1-s]=t[s]+c.sign*o),h=i(t,s),null!=r&&h.span>r&&(t[1-s]=t[s]+h.sign*r),t}},s1Aj:function(e,t,i){var a=i("/gxq"),n=i("HHfb"),s=["cartesian2d","polar","singleAxis"];function o(e,t){e=e.slice();var i=a.map(e,n.capitalFirst);t=(t||[]).slice();var s=a.map(t,n.capitalFirst);return function(n,o){a.each(e,function(e,a){for(var r={name:e,capital:i[a]},l=0;l<t.length;l++)r[t[l]]=e+s[l];n.call(o,r)})}}var r=o(["x","y","z","radius","angle","single"],["axisIndex","axis","index","id"]);t.isCoordSupported=function(e){return a.indexOf(s,e)>=0},t.createNameEach=o,t.eachAxisDim=r,t.createLinkedNodesFinder=function(e,t,i){return function(s){var o,r={nodes:[],records:{}};if(t(function(e){r.records[e.name]={}}),!s)return r;n(s,r);do{o=!1,e(l)}while(o);function l(e){!function(e,t){return a.indexOf(t.nodes,e)>=0}(e,r)&&function(e,n){var s=!1;return t(function(t){a.each(i(e,t)||[],function(e){n.records[t.name][e]&&(s=!0)})}),s}(e,r)&&(n(e,r),o=!0)}return r};function n(e,n){n.nodes.push(e),t(function(t){a.each(i(e,t)||[],function(e){n.records[t.name][e]=!0})})}}},sJ4e:function(e,t,i){i("4Nz2").__DEV__;var a=i("Icdr"),n=i("/gxq"),s=i("YNzw"),o=i("vXqC"),r=i("s1Aj"),l=i("GWV8"),c=n.each,u=r.eachAxisDim;function d(e){var t={};return c(["start","end","startValue","endValue","throttle"],function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t}function h(e,t){var i=e._rangePropMode,a=e.get("rangeMode");c([["start","startValue"],["end","endValue"]],function(e,n){var s=null!=t[e[0]],o=null!=t[e[1]];s&&!o?i[n]="percent":!s&&o?i[n]="value":a?i[n]=a[n]:s&&(i[n]="percent")})}var p=a.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,i){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var a=d(e);this.mergeDefaultAndTheme(e,i),this.doInit(a)},mergeOption:function(e){var t=d(e);n.merge(this.option,e,!0),this.doInit(t)},doInit:function(e){var t=this.option;s.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),h(this,e),c([["start","startValue"],["end","endValue"]],function(e,i){"value"===this._rangePropMode[i]&&(t[e[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,i,a,n){var s=this.dependentModels[t.axis][i],o=s.__dzAxisProxy||(s.__dzAxisProxy=new l(t.name,i,this,n));e[t.name+"_"+i]=o},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();u(function(t){var i=t.axisIndex;e[i]=o.normalizeToArray(e[i])},this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;u(function(i){null!=e[i.axisIndex]&&(t=!0)},this);var i=e.orient;return null==i&&t?"orient":t?void 0:(null==i&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),i=this.option,a=this.dependentModels;if(e){var s="vertical"===t?"y":"x";a[s+"Axis"].length?(i[s+"AxisIndex"]=[0],e=!1):c(a.singleAxis,function(a){e&&a.get("orient",!0)===t&&(i.singleAxisIndex=[a.componentIndex],e=!1)})}e&&u(function(t){if(e){var a=[],n=this.dependentModels[t.axis];if(n.length&&!a.length)for(var s=0,o=n.length;s<o;s++)"category"===n[s].get("type")&&a.push(s);i[t.axisIndex]=a,a.length&&(e=!1)}},this),e&&this.ecModel.eachSeries(function(e){this._isSeriesHasAllAxesTypeOf(e,"value")&&u(function(t){var a=i[t.axisIndex],s=e.get(t.axisIndex),o=e.get(t.axisId);s=e.ecModel.queryComponents({mainType:t.axis,index:s,id:o})[0].componentIndex,n.indexOf(a,s)<0&&a.push(s)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){!e&&(e=t.name)},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var i=!0;return u(function(a){var n=e.get(a.axisIndex),s=this.dependentModels[a.axis][n];s&&s.get("type")===t||(i=!1)},this),i},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var e;return u(function(t){if(null==e){var i=this.get(t.axisIndex);i.length&&(e=this.dependentModels[t.axis][i[0]])}},this),e},eachTargetAxis:function(e,t){var i=this.ecModel;u(function(a){c(this.get(a.axisIndex),function(n){e.call(t,a,n,this,i)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var i=this.getAxisProxy(e,t);return i&&i.getAxisModel()},setRawRange:function(e,t){var i=this.option;c([["start","startValue"],["end","endValue"]],function(t){null==e[t[0]]&&null==e[t[1]]||(i[t[0]]=e[t[0]],i[t[1]]=e[t[1]])},this),!t&&h(this,e)},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var i=this.findRepresentativeAxisProxy();return i?i.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var i in t)if(t.hasOwnProperty(i)&&t[i].hostedBy(this))return t[i];for(var i in t)if(t.hasOwnProperty(i)&&!t[i].hostedBy(this))return t[i]},getRangePropMode:function(){return this._rangePropMode.slice()}});e.exports=p},wQkr:function(e,t,i){i("cuL/"),i("sJ4e"),i("ilLo"),i("envY"),i("5Hn/"),i("8Mpj"),i("WbrJ"),i("b/SY"),i("KAfT")}});