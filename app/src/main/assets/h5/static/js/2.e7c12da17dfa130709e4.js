webpackJsonp([2],{"+QBg":function(e,t,n){var a=n("O/nt"),r={}.hasOwnProperty;e.exports={JDPAY_WAP_URL_OLD:"https://m.jdpay.com/wepay/web/pay",JDPAY_H5_URL:"https://h5pay.jd.com/jdpay/saveOrder",JDPAY_PC_URL:"https://wepay.jd.com/jdpay/saveOrder",handleCharge:function(e){var t=e.credential[e.channel],n=this.JDPAY_H5_URL;r.call(t,"channelUrl")?(n=t.channelUrl,delete t.channelUrl):r.call(t,"merchantRemark")&&(n=this.JDPAY_WAP_URL_OLD),a.formSubmit(n,"post",t)}}},"+l/b":function(e,t,n){var a=n("qaAm"),r=n("O/nt"),i=n("6ylr"),c=n("xTW6"),o={}.hasOwnProperty;e.exports={PINGPP_NOTIFY_URL_BASE:"https://notify.pingxx.com/notify",handleCharge:function(e){for(var t=e.credential[e.channel],n=["appId","timeStamp","nonceStr","package","signType","paySign"],r=0;r<n.length;r++)if(!o.call(t,n[r]))return void a.innerCallback("fail",a.error("invalid_credential","missing_field_"+n[r]));i.jsApiParameters=t,this.callpay()},callpay:function(){var e=this,t=c.getExtraModule("wx_jssdk");if(void 0!==t&&t.jssdkEnabled())t.callpay();else if("undefined"==typeof WeixinJSBridge){var n=function(){e.jsApiCall()};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n))}else this.jsApiCall()},jsApiCall:function(){o.call(i,"jsApiParameters")&&WeixinJSBridge.invoke("getBrandWCPayRequest",i.jsApiParameters,function(e){delete i.jsApiParameters,"get_brand_wcpay_request:ok"==e.err_msg?a.innerCallback("success"):"get_brand_wcpay_request:cancel"==e.err_msg?a.innerCallback("cancel"):a.innerCallback("fail",a.error("wx_result_fail",e.err_msg))})},runTestMode:function(e){if(confirm("模拟付款？")){var t="/charges/"+e.id;r.request(this.PINGPP_NOTIFY_URL_BASE+t+"?livemode=false","GET",null,function(e,t){if(t>=200&&t<400&&"success"==e)a.innerCallback("success");else{var n="http_code:"+t+";response:"+e;a.innerCallback("fail",a.error("testmode_notify_fail",n))}},function(){a.innerCallback("fail",a.error("network_err"))})}}}},"/pZk":function(e,t,n){var a=n("O/nt"),r={}.hasOwnProperty;e.exports={CMB_WALLET_URL:"https://netpay.cmbchina.com/netpayment/BaseHttp.dll?MB_EUserPay",handleCharge:function(e){var t=e.credential[e.channel],n=this.CMB_WALLET_URL;r.call(t,"ChannelUrl")&&(n=t.ChannelUrl,delete t.ChannelUrl),r.call(t,"channelVersion")&&delete t.channelVersion,a.formSubmit(n,"post",t)}}},"2Yrm":function(e,t,n){var a=n("O/nt"),r=n("qaAm"),i={}.hasOwnProperty;e.exports={YEEPAY_WAP_URL:"https://ok.yeepay.com/paymobile/api/pay/request",YEEPAY_WAP_TEST_URL:"http://mobiletest.yeepay.com/paymobile/api/pay/request",handleCharge:function(e){for(var t,n=e.channel,c=e.credential[n],o=["merchantaccount","encryptkey","data"],l=0;l<o.length;l++)if(!i.call(c,o[l]))return void r.innerCallback("fail",r.error("invalid_credential","missing_field_"+o[l]));t=i.call(c,"mode")&&"test"==c.mode?this.YEEPAY_WAP_TEST_URL:this.YEEPAY_WAP_URL,a.redirectTo(t+"?"+a.stringifyData(c,n,!0),e.channel)}}},"39iq":function(e,t){},"4mRD":function(e,t){},"6ylr":function(e,t){e.exports={}},"8aS2":function(e,t,n){var a=n("O/nt"),r=n("xTW6"),i={}.hasOwnProperty;e.exports={ALIPAY_WAP_URL_OLD:"https://wappaygw.alipay.com/service/rest.htm",ALIPAY_WAP_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(e){var t=e.channel,n=e.credential[t],c=this.ALIPAY_WAP_URL;i.call(n,"req_data")?c=this.ALIPAY_WAP_URL_OLD:i.call(n,"channel_url")&&(c=n.channel_url),i.call(n,"_input_charset")||(i.call(n,"service")&&"alipay.wap.create.direct.pay.by.user"===n.service||i.call(n,"req_data"))&&(n._input_charset="utf-8");var o=c+"?"+a.stringifyData(n,t,!0),l=r.getExtraModule("ap");a.inWeixin()&&void 0!==l?l.pay(o):a.redirectTo(o,t)}}},"940V":function(e,t,n){var a=n("6ylr"),r=n("qaAm"),i={}.hasOwnProperty;e.exports={PINGPP_NOTIFY_URL_BASE:"https://notify.pingxx.com/notify",handleCharge:function(e){for(var t=e.credential[e.channel],n=["appId","timeStamp","nonceStr","package","signType","paySign"],c=0;c<n.length;c++)if(!i.call(t,n[c]))return void r.innerCallback("fail",r.error("invalid_credential","missing_field_"+n[c]));a.jsApiParameters=t,this.callpay()},wxLiteEnabled:function(){return"undefined"!=typeof wx&&wx.requestPayment},callpay:function(){if(this.wxLiteEnabled()){var e=a.jsApiParameters;delete e.appId,e.complete=function(e){"requestPayment:ok"===e.errMsg&&r.innerCallback("success"),"requestPayment:cancel"===e.errMsg&&r.innerCallback("cancel",r.error("用户取消支付")),"undefined"!==e.err_code&&"undefined"!==e.err_desc&&r.innerCallback("fail",r.error(e.err_desc,e))},wx.requestPayment(e)}else console.log("请在微信小程序中打开")},runTestMode:function(e){var t="/charges/"+e.id;wx.request({url:this.PINGPP_NOTIFY_URL_BASE+t+"?livemode=false",success:function(e){"success"==e.data?r.innerCallback("success"):r.innerCallback("fail",r.error("testmode_notify_fail"))},fail:function(){r.innerCallback("fail",r.error("network_err"))}})}}},"9RAi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r,i,c,o=n("Xxa5"),l=n.n(o),s=n("//Fk"),u=n.n(s),d=n("exGp"),p=n.n(d),f=n("2sLL"),h=n("/kga"),_=n("gyMJ"),v=n("9q2/"),y=n.n(v),m=n("Xe5u"),g=this,b=(f.a,h.a,c=p()(l.a.mark(function e(t,n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,n.checkOrder(t);case 3:return a=e.sent,e.abrupt("return",new u.a(function(e,t){1===a?e(_.a.get("/advisory/latest/").then(function(e){return e.data})):t(new Error("error /advisory/latest/"))}));case 5:case"end":return e.stop()}},e,g)})),i=p()(l.a.mark(function e(t,n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,n.checkOrder(t);case 3:return a=e.sent,e.abrupt("return",new u.a(function(e,t){1===a?e(_.a.get("/diary-evaluation/latest/").then(function(e){return e.data})):t(new Error("error /advisory/latest/"))}));case 5:case"end":return e.stop()}},e,g)})),r=p()(l.a.mark(function e(t,n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,n.checkOrder(t);case 3:return a=e.sent,e.abrupt("return",new u.a(function(e,t){1===a?e(_.a.get("/booking/latest/").then(function(e){return e.data})):t(new Error("error /booking/latest/"))}));case 5:case"end":return e.stop()}},e,g)})),a=p()(l.a.mark(function e(t){var n,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=0;case 2:if(!(a<=10)){e.next=20;break}return e.prev=3,e.next=6,_.a.get("/orders/"+t);case 6:if(1!==(r=e.sent).data.status||200!==r.status){e.next=10;break}return n=1,e.abrupt("break",20);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("break",20);case 15:return e.next=17,new u.a(function(e){setTimeout(function(){return e()},1e3)});case 17:a++,e.next=2;break;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e,g,[[3,12]])})),this),C={components:{XButton:f.a,XDialog:h.a},data:function(){var e=JSON.parse(sessionStorage.getItem("selectService")),t=JSON.parse(sessionStorage.getItem("service"));return console.log(e,t),t.introduction=t.service_packages[e].name,t.price=t.service_packages[e].packages[0].unit_price/100,{payLabel:"支付",defaultNum:1,isPay:!0,show:!1,selectService:e,payTip:"",service:t}},watch:{defaultNum:function(e,t){null!==e&&(/^\d*$/.test(e)?/^0/.test(e)&&(this.defaultNum=0):this.defaultNum=0),this.isPay=this.defaultNum>0}},created:function(){Object(m.a)()},methods:{decrease:function(){this.defaultNum<1&&"number"==typeof this.defaultNum?this.defaultNum=0:this.defaultNum-=1},add:function(){this.defaultNum<8&&(this.defaultNum=Number(this.defaultNum)+1)},getFillingLatest:function(){var e=p()(l.a.mark(function e(t,n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,n.checkOrder(t);case 3:return a=e.sent,e.abrupt("return",new u.a(function(e,t){1===a?e(_.a.get("/advisory/latest/").then(function(e){return e.data})):t(new Error("error /advisory/latest/"))}));case 5:case"end":return e.stop()}},e,b)}));return function(t,n){return e.apply(this,arguments)}}(),getDiaryEvaluationLatest:function(){var e=p()(l.a.mark(function e(t,n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,n.checkOrder(t);case 3:return a=e.sent,e.abrupt("return",new u.a(function(e,t){1===a?e(_.a.get("/diary-evaluation/latest/").then(function(e){return e.data})):t(new Error("error /advisory/latest/"))}));case 5:case"end":return e.stop()}},e,b)}));return function(t,n){return e.apply(this,arguments)}}(),getBookingLatest:function(){var e=p()(l.a.mark(function e(t,n){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.next=3,n.checkOrder(t);case 3:return a=e.sent,e.abrupt("return",new u.a(function(e,t){1===a?e(_.a.get("/booking/latest/").then(function(e){return e.data})):t(new Error("error /booking/latest/"))}));case 5:case"end":return e.stop()}},e,b)}));return function(t,n){return e.apply(this,arguments)}}(),getOrders:function(){return _.a.post("/orders",{amount:100*this.service.price*this.defaultNum,channel:"wx_pub",currency:"cny",subject:this.service.name,body:this.service.description,package_id:this.service.service_packages[this.selectService].packages[0].id,quantity:this.defaultNum,open_id:this.$route.query.openid}).then(function(e){return e.data})},checkOrder:function(){var e=p()(l.a.mark(function e(t){var n,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,a=0;case 2:if(!(a<=10)){e.next=20;break}return e.prev=3,e.next=6,_.a.get("/orders/"+t);case 6:if(1!==(r=e.sent).data.status||200!==r.status){e.next=10;break}return n=1,e.abrupt("break",20);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(3),e.abrupt("break",20);case 15:return e.next=17,new u.a(function(e){setTimeout(function(){return e()},1e3)});case 17:a++,e.next=2;break;case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},e,b,[[3,12]])}));return function(t){return e.apply(this,arguments)}}(),onPay:function(){if(this.service.id)if(WeixinJSBridge){var e=this;this.getOrders().then(function(t){var n,a=t.order_no;y.a.createPayment(t,(n=p()(l.a.mark(function t(n,r){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("success"!==n){t.next=20;break}if(0!==e.service.type){t.next=5;break}e.getDiaryEvaluationLatest(a,e).then(function(t){e.$router.push("/weekly-assess?id="+t.id)}).catch(function(){e.$router.push("/")}),t.next=18;break;case 5:if(1!==e.service.type){t.next=9;break}e.getFillingLatest(a,e).then(function(t){e.$router.push("/sketch-advice/matter-filling/"+t.id)}).catch(function(){e.$router.push("/")}),t.next=18;break;case 9:if(2!==e.service.type){t.next=13;break}e.getBookingLatest(a,e).then(function(t){e.$router.push("/booking/"+t.id)}).catch(function(){e.$router.push("/")}),t.next=18;break;case 13:if(3!==e.service.type){t.next=18;break}return t.next=16,e.checkOrder(a);case 16:1===t.sent?e.$router.push("/cbti"):e.$router.push("/");case 18:t.next=21;break;case 20:"fail"===n?(e.show=!0,e.payTip="支付异常，请稍后重试"):"cancel"===n&&(e.show=!0,e.payTip="支付取消");case 21:case"end":return t.stop()}},t,this)})),function(e,t){return n.apply(this,arguments)}))})}else this.$vux.toast.text("请在公众号中访问");else this.$vux.toast.text("请选择服务")}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pay-page"},[n("section",[n("div",{staticClass:"doc_service bg_color_white"},[n("a",{staticClass:"box_shadow"},[n("img",{staticClass:"service_img",attrs:{src:e.service.icon}})]),e._v(" "),n("div",{staticClass:"service-cont"},[n("h4",[e._v(e._s(e.service.name))]),e._v(" "),n("div",{staticClass:"service_price"},[n("span",[e._v(e._s(e.service.introduction))])])])])]),e._v(" "),n("section",{staticClass:"item bg_color_white",staticStyle:{padding:".28rem .4rem"}},[n("span",{staticStyle:{"line-height":".7rem"}},[e._v("购买数量")]),e._v(" "),n("div",{staticClass:"inline_block"},[n("span",{staticClass:"inline_block action action_span_dec",on:{click:function(t){e.decrease()}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.defaultNum,expression:"defaultNum"}],staticClass:"inline_block input",domProps:{value:e.defaultNum},on:{input:function(t){t.target.composing||(e.defaultNum=t.target.value)}}}),e._v(" "),n("span",{staticClass:"inline_block action action_span_add",on:{click:function(t){e.add()}}})])]),e._v(" "),n("section",{staticClass:"item bg_color_white",staticStyle:{"margin-top":"1px",padding:".4rem"}},[n("span",[e._v("支付金额")]),e._v(" "),n("div",{staticClass:"inline_block"},[n("span",{staticClass:"font_color_red",staticStyle:{"padding-right":"0.1rem"}},[e._v(e._s(e.service.price*e.defaultNum))]),e._v(" "),n("span",[e._v("元")])])]),e._v(" "),n("div",{staticClass:"button"},[n("button",{staticClass:"record_button",class:{disabled:!e.isPay},on:{click:e.onPay}},[e._v(e._s(e.payLabel))])]),e._v(" "),n("x-dialog",{staticClass:"dialog",model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"img-box"},[n("svg-icon",{attrs:{"icon-class":"error"}}),e._v(" "),n("div",{staticClass:"dialog-tip"},[e._v(e._s(e.payTip))])],1),e._v(" "),n("div",{staticClass:"btn-wrapper"},[n("x-button",{nativeOn:{click:function(t){e.show=!1}}},[e._v("返回")])],1)])],1)},staticRenderFns:[]};var k=n("VU/8")(C,x,!1,function(e){n("39iq"),n("4mRD")},"data-v-373d422c",null);t.default=k.exports},"9q2/":function(e,t,n){var a=n("Tysu").v,r={}.hasOwnProperty,i=function(){n("UGUj").init()};i.prototype.version=a,e.exports=new i;var c=n("h2HD"),o=n("qaAm"),l=n("xTW6"),s=n("6ylr"),u=n("BbH1"),d=n("fVql");i.prototype.createPayment=function(e,t,n,a){if("function"==typeof t&&(o.userCallback=t),d.init(e),r.call(d,"id"))if(r.call(d,"channel")){r.call(d,"app")&&("string"==typeof d.app?s.app_id=d.app:"object"==typeof d.app&&"string"==typeof d.app.id&&(s.app_id=d.app.id)),u.report({type:s.type||"pure_sdk_click",channel:d.channel,ch_id:d.id});var i=d.channel;if(r.call(d,"credential"))if(d.credential)if(r.call(d.credential,i))if(r.call(d,"livemode")){var p=l.getChannelModule(i);if(void 0===p)return console.error('channel module "'+i+'" is undefined'),void o.innerCallback("fail",o.error("invalid_channel",'channel module "'+i+'" is undefined'));!1!==d.livemode?(void 0!==n&&(s.signature=n),"boolean"==typeof a&&(s.debug=a),p.handleCharge(d)):r.call(p,"runTestMode")?p.runTestMode(d):c.runTestMode(d)}else o.innerCallback("fail",o.error("invalid_charge","no_livemode_field"));else o.innerCallback("fail",o.error("invalid_credential","credential_is_incorrect"));else o.innerCallback("fail",o.error("invalid_credential","credential_is_undefined"));else o.innerCallback("fail",o.error("invalid_charge","no_credential"))}else o.innerCallback("fail",o.error("invalid_charge","no_channel"));else o.innerCallback("fail",o.error("invalid_charge","no_charge_id"))},i.prototype.setAPURL=function(e){s.APURL=e},i.prototype.setUrlReturnCallback=function(e,t){if("function"!=typeof e)throw"callback need to be a function";if(o.urlReturnCallback=e,void 0!==t){if(!Array.isArray(t))throw"channels need to be an array";o.urlReturnChannels=t}}},A6S8:function(e,t,n){var a=n("qaAm"),r=n("O/nt"),i=n("6ylr"),c=n("xTW6"),o={}.hasOwnProperty;e.exports={PINGPP_NOTIFY_URL_BASE:"https://notify.pingxx.com/notify",handleCharge:function(e){for(var t=e.credential[e.channel],n=["appId","timeStamp","nonceStr","package","signType","paySign"],r=0;r<n.length;r++)if(!o.call(t,n[r]))return void a.innerCallback("fail",a.error("invalid_credential","missing_field_"+n[r]));i.jsApiParameters=t,this.callpay()},callpay:function(){var e=this,t=c.getExtraModule("wx_jssdk");if(void 0!==t&&t.jssdkEnabled())t.callpay();else if("undefined"==typeof WeixinJSBridge){var n=function(){e.jsApiCall()};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n))}else this.jsApiCall()},jsApiCall:function(){o.call(i,"jsApiParameters")&&WeixinJSBridge.invoke("getBrandWCPayRequest",i.jsApiParameters,function(e){delete i.jsApiParameters,"get_brand_wcpay_request:ok"==e.err_msg?a.innerCallback("success"):"get_brand_wcpay_request:cancel"==e.err_msg?a.innerCallback("cancel"):a.innerCallback("fail",a.error("wx_result_fail",e.err_msg))})},runTestMode:function(e){if(confirm("模拟付款？")){var t="/charges/"+e.id;r.request(this.PINGPP_NOTIFY_URL_BASE+t+"?livemode=false","GET",null,function(e,t){if(t>=200&&t<400&&"success"==e)a.innerCallback("success");else{var n="http_code:"+t+";response:"+e;a.innerCallback("fail",a.error("testmode_notify_fail",n))}},function(){a.innerCallback("fail",a.error("network_err"))})}}}},BbH1:function(e,t,n){var a=n("O/nt"),r=n("6ylr"),i=n("vNiH"),c={seperator:"###",limit:1,report_url:"https://statistics.pingxx.com/one_stats",timeout:100},o=function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=e.substr(0).match(n);return null!==a?unescape(a[2]):null};c.store=function(e){if("undefined"!=typeof localStorage&&null!==localStorage){var t={};t.app_id=e.app_id||r.app_id||"app_not_defined",t.ch_id=e.ch_id||"",t.channel=e.channel||"",t.type=e.type||"",t.user_agent=navigator.userAgent,t.host=window.location.host,t.time=(new Date).getTime(),t.puid=r.puid;var n="app_id="+t.app_id+"&channel="+t.channel+"&ch_id="+t.ch_id+"&host="+t.host+"&time="+t.time+"&type="+t.type+"&user_agent="+t.user_agent+"&puid="+t.puid,a=n;null!==localStorage.getItem("PPP_ONE_STATS")&&0!==localStorage.getItem("PPP_ONE_STATS").length&&(a=localStorage.getItem("PPP_ONE_STATS")+this.seperator+n);try{localStorage.setItem("PPP_ONE_STATS",a)}catch(e){}}},c.send=function(){if("undefined"!=typeof localStorage&&null!==localStorage){var e=localStorage.getItem("PPP_ONE_STATS");if(!(null===e||e.split(this.seperator).length<this.limit))try{for(var t=[],n=e.split(this.seperator),r=i(n.join("&")),c=0;c<n.length;c++)t.push({app_id:o(n[c],"app_id"),channel:o(n[c],"channel"),ch_id:o(n[c],"ch_id"),host:o(n[c],"host"),time:o(n[c],"time"),type:o(n[c],"type"),user_agent:o(n[c],"user_agent"),puid:o(n[c],"puid")});a.request(this.report_url,"POST",t,function(e,t){200==t&&localStorage.removeItem("PPP_ONE_STATS")},void 0,{"X-Pingpp-Report-Token":r})}catch(e){}}},c.report=function(e){var t=this;t.store(e),setTimeout(function(){t.send()},t.timeout)},e.exports=c},GEQg:function(e,t,n){var a=n("tE86");e.exports={handleCharge:function(e){a.handleCharge(e)}}},HORF:function(e,t,n){var a=n("O/nt"),r=n("qaAm"),i={}.hasOwnProperty;e.exports={handleCharge:function(e){var t=e.channel,n=e.credential[t];i.call(n,"url")?a.redirectTo(n.url+"?"+a.stringifyData(n,t),t):r.innerCallback("fail",r.error("invalid_credential","missing_field:url"))}}},HUZE:function(e,t,n){var a=n("O/nt");e.exports={CP_B2B_URL:"https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0",handleCharge:function(e){var t=e.credential[e.channel];a.formSubmit(this.CP_B2B_URL,"post",t)}}},"O/nt":function(e,t,n){var a=n("qaAm"),r={}.hasOwnProperty,i=e.exports={stringifyData:function(e,t,n){void 0===n&&(n=!1);var a=[];for(var i in e)r.call(e,i)&&"function"!=typeof e[i]&&("bfb_wap"==t&&"url"==i||"yeepay_wap"==t&&"mode"==i||"channel_url"!=i&&a.push(i+"="+(n?encodeURIComponent(e[i]):e[i])));return a.join("&")},request:function(e,t,n,a,c,o){if("undefined"!=typeof XMLHttpRequest){var l=new XMLHttpRequest;if(void 0!==l.timeout&&(l.timeout=6e3),"GET"===(t=t.toUpperCase())&&"object"==typeof n&&n&&(e+="?"+i.stringifyData(n,"",!0)),l.open(t,e,!0),void 0!==o)for(var s in o)r.call(o,s)&&l.setRequestHeader(s,o[s]);"POST"===t?(l.setRequestHeader("Content-type","application/json; charset=utf-8"),l.send(JSON.stringify(n))):l.send(),void 0===a&&(a=function(){}),void 0===c&&(c=function(){}),l.onreadystatechange=function(){4==l.readyState&&a(l.responseText,l.status,l)},l.onerror=function(e){c(l,0,e)}}else console.log("Function XMLHttpRequest is undefined.")},formSubmit:function(e,t,n){if("undefined"!=typeof window){var a=document.createElement("form");for(var i in a.setAttribute("method",t),a.setAttribute("action",e),n)if(r.call(n,i)){var c=document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name",i),c.setAttribute("value",n[i]),a.appendChild(c)}document.body.appendChild(a),a.submit()}else console.log("Not a browser, form submit url: "+e)},randomString:function(e){void 0===e&&(e=32);for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,a="",r=0;r<e;r++)a+=t.charAt(Math.floor(Math.random()*n));return a},redirectTo:function(e,t){a.shouldReturnUrlByCallback(t)?a.triggerUrlReturnCallback(null,e):"undefined"!=typeof window?window.location.href=e:console.log("Not a browser, redirect url: "+e)},inWeixin:function(){return"undefined"!=typeof navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("micromessenger")},inAlipay:function(){return"undefined"!=typeof navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("alipayclient")},documentReady:function(e){"undefined"!=typeof document?"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e):e()},loadUrlJs:function(e,t,n){var a=document.getElementsByTagName("head")[0],r=null;null==document.getElementById(e)?((r=document.createElement("script")).setAttribute("type","text/javascript"),r.setAttribute("src",t),r.setAttribute("id",e),r.async=!0,null!=n&&(r.onload=r.onreadystatechange=function(){if(r.ready)return!1;r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r.ready=!0,n())}),a.appendChild(r)):null!=n&&n()}}},RhKs:function(e,t,n){var a=n("tE86"),r=n("qaAm"),i=n("O/nt"),c={}.hasOwnProperty;e.exports={handleCharge:function(e){var t=e.extra;if(c.call(t,"pay_channel")){var n=t.pay_channel;"wx"!==n||i.inWeixin()?"alipay"!==n||i.inAlipay()?a.handleCharge(e):r.innerCallback("fail",r.error("Not in the Alipay browser")):r.innerCallback("fail",r.error("Not in the WeChat browser"))}else r.innerCallback("fail",r.error("invalid_charge","charge 格式不正确"))}}},Tysu:function(e,t){e.exports={v:"2.2.2"}},UGUj:function(e,t,n){var a=n("6ylr"),r=n("O/nt"),i=n("BbH1");e.exports={SRC_URL:"https://cookie.pingxx.com",init:function(){var e=this;r.documentReady(function(){try{e.initPuid()}catch(e){}})},initPuid:function(){if("undefined"!=typeof window&&"undefined"!=typeof localStorage&&null!==localStorage){var e=localStorage.getItem("pingpp_uid");if(null===e){e=r.randomString();try{localStorage.setItem("pingpp_uid",e)}catch(e){}}if(a.puid=e,!document.getElementById("p_analyse_iframe")){var t;try{t=document.createElement("iframe")}catch(e){t=document.createElement('<iframe name="ifr"></iframe>')}t.id="p_analyse_iframe",t.src=this.SRC_URL+"/?puid="+e,t.style.display="none",document.body.appendChild(t)}setTimeout(function(){i.send()},0)}}}},ZvHn:function(e,t,n){var a=n("O/nt");e.exports={handleCharge:function(e){var t=e.credential[e.channel];a.redirectTo(t)}}},bLUA:function(e,t,n){var a={}.hasOwnProperty,r=n("qaAm");e.exports={handleCharge:function(e){var t=e.credential[e.channel];a.call(t,"transaction_no")?this.tradePay(t.transaction_no):r.innerCallback("fail",r.error("invalid_credential","missing_field_transaction_no"))},ready:function(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)},tradePay:function(e){this.ready(function(){AlipayJSBridge.call("tradePay",{tradeNO:e},function(e){"9000"==e.resultCode?r.innerCallback("success"):"6001"==e.resultCode?r.innerCallback("cancel",r.error(e.result)):r.innerCallback("fail",r.error(e.result))})})}}},fVql:function(e,t,n){var a=n("qaAm"),r={}.hasOwnProperty;e.exports={id:null,or_id:null,channel:null,app:null,credential:{},extra:null,livemode:null,order_no:null,time_expire:null,init:function(e){var t;if("string"==typeof e)try{t=JSON.parse(e)}catch(e){return void a.innerCallback("fail",a.error("json_decode_fail",e))}else t=e;if(void 0!==t){if(r.call(t,"object")&&"order"==t.object){t.or_id=t.id,t.order_no=t.merchant_order_no;var n=t.charge_essentials;if(t.channel=n.channel,t.credential=n.credential,t.extra=n.extra,r.call(t,"charge")&&null!=t.charge)t.id=t.charge;else if(r.call(n,"id")&&null!=n.id)t.id=n.id;else if(r.call(t,"charges"))for(var i=0;i<t.charges.data.length;i++)if(t.charges.data[i].channel===n.channel){t.id=t.charges.data[i].id;break}}else r.call(t,"object")&&"recharge"==t.object&&(t=t.charge);for(var c in this)r.call(t,c)&&(this[c]=t[c]);return this}a.innerCallback("fail",a.error("json_decode_fail"))},clear:function(){for(var e in this)"function"!=typeof this[e]&&(this[e]=null)}}},gdg2:function(e,t,n){var a=n("O/nt");e.exports={UPACP_WAP_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(e){var t=e.credential[e.channel];a.formSubmit(this.UPACP_WAP_URL,"post",t)}}},h2HD:function(e,t,n){var a=n("O/nt"),r={}.hasOwnProperty;e.exports={PINGPP_MOCK_URL:"http://sissi.pingxx.com/mock.php",runTestMode:function(e){var t={ch_id:e.id,scheme:"http",channel:e.channel};r.call(e,"order_no")?t.order_no=e.order_no:r.call(e,"orderNo")&&(t.order_no=e.orderNo),r.call(e,"time_expire")?t.time_expire=e.time_expire:r.call(e,"timeExpire")&&(t.time_expire=e.timeExpire),r.call(e,"extra")&&(t.extra=encodeURIComponent(JSON.stringify(e.extra))),a.redirectTo(this.PINGPP_MOCK_URL+"?"+a.stringifyData(t),e.channel)}}},j1rR:function(e,t,n){var a=n("O/nt"),r=n("qaAm"),i={}.hasOwnProperty;e.exports={handleCharge:function(e){var t=e.credential[e.channel];"string"==typeof t?a.redirectTo(t,e.channel):"object"==typeof t&&i.call(t,"url")?a.redirectTo(t.url,e.channel):r.innerCallback("fail",r.error("invalid_credential","credential 格式不正确"))}}},jdPS:function(e,t,n){var a=n("tE86");e.exports={handleCharge:function(e){a.handleCharge(e)}}},mjOb:function(e,t,n){var a=n("O/nt"),r={}.hasOwnProperty;e.exports={ALIPAY_PC_DIRECT_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(e){var t=e.channel,n=e.credential[t],i=this.ALIPAY_PC_DIRECT_URL;r.call(n,"channel_url")&&(i=n.channel_url),r.call(n,"_input_charset")||r.call(n,"service")&&"create_direct_pay_by_user"===n.service&&(n._input_charset="utf-8");var c=a.stringifyData(n,t,!0);a.redirectTo(i+"?"+c,t)}}},qaAm:function(e,t,n){var a=n("fVql");e.exports={userCallback:void 0,urlReturnCallback:void 0,urlReturnChannels:["alipay_pc_direct"],innerCallback:function(e,t){"function"==typeof this.userCallback&&(void 0===t&&(t=this.error()),this.userCallback(e,t),this.userCallback=void 0,a.clear())},error:function(e,t){return{msg:e=void 0===e?"":e,extra:t=void 0===t?"":t}},triggerUrlReturnCallback:function(e,t){"function"==typeof this.urlReturnCallback&&this.urlReturnCallback(e,t)},shouldReturnUrlByCallback:function(e){return"function"==typeof this.urlReturnCallback&&-1!==this.urlReturnChannels.indexOf(e)}}},t6vo:function(e,t,n){var a,r,i=n("6ylr"),c={}.hasOwnProperty;r={PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",makeDOMException:function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(t){var e=new Error("DOM Exception 5");return e.code=e.number=5,e.name=e.description="INVALID_CHARACTER_ERR",e.toString=function(){return"Error: "+e.name+": "+e.message},e}},getbyte64:function(e,t){var n=r.ALPHA.indexOf(e.charAt(t));if(-1===n)throw r.makeDOMException();return n},decode:function(e){e=""+e;var t,n,a,i=r.getbyte64,c=e.length;if(0===c)return e;if(c%4!=0)throw r.makeDOMException();t=0,e.charAt(c-1)===r.PADCHAR&&(t=1,e.charAt(c-2)===r.PADCHAR&&(t=2),c-=4);var o=[];for(n=0;n<c;n+=4)a=i(e,n)<<18|i(e,n+1)<<12|i(e,n+2)<<6|i(e,n+3),o.push(String.fromCharCode(a>>16,a>>8&255,255&a));switch(t){case 1:a=i(e,n)<<18|i(e,n+1)<<12|i(e,n+2)<<6,o.push(String.fromCharCode(a>>16,a>>8&255));break;case 2:a=i(e,n)<<18|i(e,n+1)<<12,o.push(String.fromCharCode(a>>16))}return o.join("")},getbyte:function(e,t){var n=e.charCodeAt(t);if(n>255)throw r.makeDOMException();return n},encode:function(e){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var t,n,a=r.PADCHAR,i=r.ALPHA,c=r.getbyte,o=[],l=(e=""+e).length-e.length%3;if(0===e.length)return e;for(t=0;t<l;t+=3)n=c(e,t)<<16|c(e,t+1)<<8|c(e,t+2),o.push(i.charAt(n>>18)),o.push(i.charAt(n>>12&63)),o.push(i.charAt(n>>6&63)),o.push(i.charAt(63&n));switch(e.length-l){case 1:n=c(e,t)<<16,o.push(i.charAt(n>>18)+i.charAt(n>>12&63)+a+a);break;case 2:n=c(e,t)<<16|c(e,t+1)<<8,o.push(i.charAt(n>>18)+i.charAt(n>>12&63)+i.charAt(n>>6&63)+a)}return o.join("")}},(a={}).url="pay.htm",a.pay=function(e){var t=encodeURIComponent(r.encode(e));c.call(i,"APURL")&&(a.url=i.APURL),location.href=a.url+"?goto="+t},a.decode=function(e){return r.decode(decodeURIComponent(e))},e.exports=a},t8o8:function(e,t,n){var a=n("qaAm"),r=n("O/nt"),i=n("6ylr"),c={}.hasOwnProperty;e.exports={SRC_URL:"https://open.mobile.qq.com/sdk/qqapi.js?_bid=152",ID:"mqq_api",handleCharge:function(e){var t=e.credential[e.channel];c.call(t,"token_id")?(i.tokenId=t.token_id,r.loadUrlJs(this.ID,this.SRC_URL,this.callpay)):a.innerCallback("fail",a.error("invalid_credential","missing_token_id"))},callpay:function(){if("undefined"!=typeof mqq){if(0==mqq.QQVersion)return a.innerCallback("fail",a.error("Not in the QQ client")),void delete i.tokenId;mqq.tenpay.pay({tokenId:i.tokenId},function(e){0==e.resultCode?a.innerCallback("success"):a.innerCallback("fail",a.error(e.retmsg))})}else a.innerCallback("fail",a.error("network_err"));delete i.tokenId}}},tE86:function(e,t,n){var a=n("O/nt"),r=n("qaAm"),i={}.hasOwnProperty;e.exports={handleCharge:function(e){var t,n=e.credential[e.channel];if("string"==typeof n)t=n;else{if(!i.call(n,"url"))return void r.innerCallback("fail",r.error("invalid_credential","credential format is incorrect"));t=n.url}a.redirectTo(t,e.channel)}}},tizn:function(e,t,n){var a=n("O/nt");e.exports={UPACP_PC_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(e){var t=e.credential[e.channel];a.formSubmit(this.UPACP_PC_URL,"post",t)}}},vNiH:function(e,t){!function(){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,a,r,i,c){return t((o=t(t(n,e),t(r,c)))<<(l=i)|o>>>32-l,a);var o,l}function a(e,t,a,r,i,c,o){return n(t&a|~t&r,e,t,i,c,o)}function r(e,t,a,r,i,c,o){return n(t&r|a&~r,e,t,i,c,o)}function i(e,t,a,r,i,c,o){return n(t^a^r,e,t,i,c,o)}function c(e,t,a,r,i,c,o){return n(a^(t|~r),e,t,i,c,o)}function o(e,n){var o,l,s,u,d;e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var p=1732584193,f=-271733879,h=-1732584194,_=271733878;for(o=0;o<e.length;o+=16)l=p,s=f,u=h,d=_,f=c(f=c(f=c(f=c(f=i(f=i(f=i(f=i(f=r(f=r(f=r(f=r(f=a(f=a(f=a(f=a(f,h=a(h,_=a(_,p=a(p,f,h,_,e[o],7,-680876936),f,h,e[o+1],12,-389564586),p,f,e[o+2],17,606105819),_,p,e[o+3],22,-1044525330),h=a(h,_=a(_,p=a(p,f,h,_,e[o+4],7,-176418897),f,h,e[o+5],12,1200080426),p,f,e[o+6],17,-1473231341),_,p,e[o+7],22,-45705983),h=a(h,_=a(_,p=a(p,f,h,_,e[o+8],7,1770035416),f,h,e[o+9],12,-1958414417),p,f,e[o+10],17,-42063),_,p,e[o+11],22,-1990404162),h=a(h,_=a(_,p=a(p,f,h,_,e[o+12],7,1804603682),f,h,e[o+13],12,-40341101),p,f,e[o+14],17,-1502002290),_,p,e[o+15],22,1236535329),h=r(h,_=r(_,p=r(p,f,h,_,e[o+1],5,-165796510),f,h,e[o+6],9,-1069501632),p,f,e[o+11],14,643717713),_,p,e[o],20,-373897302),h=r(h,_=r(_,p=r(p,f,h,_,e[o+5],5,-701558691),f,h,e[o+10],9,38016083),p,f,e[o+15],14,-660478335),_,p,e[o+4],20,-405537848),h=r(h,_=r(_,p=r(p,f,h,_,e[o+9],5,568446438),f,h,e[o+14],9,-1019803690),p,f,e[o+3],14,-187363961),_,p,e[o+8],20,1163531501),h=r(h,_=r(_,p=r(p,f,h,_,e[o+13],5,-1444681467),f,h,e[o+2],9,-51403784),p,f,e[o+7],14,1735328473),_,p,e[o+12],20,-1926607734),h=i(h,_=i(_,p=i(p,f,h,_,e[o+5],4,-378558),f,h,e[o+8],11,-2022574463),p,f,e[o+11],16,1839030562),_,p,e[o+14],23,-35309556),h=i(h,_=i(_,p=i(p,f,h,_,e[o+1],4,-1530992060),f,h,e[o+4],11,1272893353),p,f,e[o+7],16,-155497632),_,p,e[o+10],23,-1094730640),h=i(h,_=i(_,p=i(p,f,h,_,e[o+13],4,681279174),f,h,e[o],11,-358537222),p,f,e[o+3],16,-722521979),_,p,e[o+6],23,76029189),h=i(h,_=i(_,p=i(p,f,h,_,e[o+9],4,-640364487),f,h,e[o+12],11,-421815835),p,f,e[o+15],16,530742520),_,p,e[o+2],23,-995338651),h=c(h,_=c(_,p=c(p,f,h,_,e[o],6,-198630844),f,h,e[o+7],10,1126891415),p,f,e[o+14],15,-1416354905),_,p,e[o+5],21,-57434055),h=c(h,_=c(_,p=c(p,f,h,_,e[o+12],6,1700485571),f,h,e[o+3],10,-1894986606),p,f,e[o+10],15,-1051523),_,p,e[o+1],21,-2054922799),h=c(h,_=c(_,p=c(p,f,h,_,e[o+8],6,1873313359),f,h,e[o+15],10,-30611744),p,f,e[o+6],15,-1560198380),_,p,e[o+13],21,1309151649),h=c(h,_=c(_,p=c(p,f,h,_,e[o+4],6,-145523070),f,h,e[o+11],10,-1120210379),p,f,e[o+2],15,718787259),_,p,e[o+9],21,-343485551),p=t(p,l),f=t(f,s),h=t(h,u),_=t(_,d);return[p,f,h,_]}function l(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function s(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function u(e){var t,n,a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return a}function d(e){return unescape(encodeURIComponent(e))}function p(e){return function(e){return l(o(s(e),8*e.length))}(d(e))}function f(e,t){return function(e,t){var n,a,r=s(e),i=[],c=[];for(i[15]=c[15]=void 0,r.length>16&&(r=o(r,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^r[n],c[n]=1549556828^r[n];return a=o(i.concat(s(t)),512+8*t.length),l(o(c.concat(a),640))}(d(e),d(t))}e.exports=function(e,t,n){return t?n?f(t,e):u(f(t,e)):n?p(e):u(p(e))}}()},voCn:function(e,t,n){var a=n("O/nt"),r=n("xTW6"),i={}.hasOwnProperty;e.exports={ALIPAY_WAP_URL_OLD:"https://wappaygw.alipay.com/service/rest.htm",ALIPAY_WAP_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(e){var t=e.channel,n=e.credential[t],c=this.ALIPAY_WAP_URL;i.call(n,"req_data")?c=this.ALIPAY_WAP_URL_OLD:i.call(n,"channel_url")&&(c=n.channel_url),i.call(n,"_input_charset")||(i.call(n,"service")&&"alipay.wap.create.direct.pay.by.user"===n.service||i.call(n,"req_data"))&&(n._input_charset="utf-8");var o=c+"?"+a.stringifyData(n,t,!0),l=r.getExtraModule("ap");a.inWeixin()&&void 0!==l?l.pay(o):a.redirectTo(o,t)}}},xTW6:function(e,t,n){var a={}.hasOwnProperty,r={};e.exports=r,r.channels={alipay_pc_direct:n("xz5l"),alipay_qr:n("bLUA"),alipay_wap:n("8aS2"),bfb_wap:n("HORF"),cb_alipay_pc_direct:n("mjOb"),cb_alipay_wap:n("voCn"),cb_wx_pub:n("+l/b"),cmb_wallet:n("/pZk"),cp_b2b:n("HUZE"),fqlpay_qr:n("GEQg"),fqlpay_wap:n("jdPS"),isv_wap:n("RhKs"),jdpay_wap:n("+QBg"),paypal:n("ZvHn"),qpay_pub:n("t8o8"),upacp_pc:n("tizn"),upacp_wap:n("gdg2"),wx_lite:n("940V"),wx_pub:n("A6S8"),wx_wap:n("j1rR"),yeepay_wap:n("2Yrm")},r.extras={ap:n("t6vo")},r.getChannelModule=function(e){if(a.call(r.channels,e))return r.channels[e]},r.getExtraModule=function(e){if(a.call(r.extras,e))return r.extras[e]}},xz5l:function(e,t,n){var a=n("O/nt"),r={}.hasOwnProperty;e.exports={ALIPAY_PC_DIRECT_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(e){var t=e.channel,n=e.credential[t],i=this.ALIPAY_PC_DIRECT_URL;r.call(n,"channel_url")&&(i=n.channel_url),r.call(n,"_input_charset")||r.call(n,"service")&&"create_direct_pay_by_user"===n.service&&(n._input_charset="utf-8");var c=a.stringifyData(n,t,!0);a.redirectTo(i+"?"+c,t)}}}});