webpackJsonp([34],{N3LC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("aQR8"),a=s("rHil"),n=s("32ER"),o=s("odqc"),r=s("Znkm"),l=s("1DHf"),c=s("gyMJ"),d=(a.a,n.a,o.a,r.a,l.a,{name:"record",components:{Group:a.a,CellBox:n.a,Tab:o.a,TabItem:r.a,Cell:l.a},data:function(){return{swiperIndex:0,contentHeight:"",contentTop:"",advisoriesNo:[],advisoriesYes:[],endTime:[],pagingNo:{page:1,per_page:15},pagingYes:{page:1,per_page:15}}},methods:{refresh:function(t){0===this.swiperIndex?this.getAdvisories("advisoriesNo",t):this.getAdvisories("advisoriesYes",t)},infinite:function(t){console.log("infinite"),0===this.swiperIndex?(this.pagingNo.per_page=this.pagingNo.per_page+15,this.getAdvisories("advisoriesNo",t)):(this.pagingYes.per_page=this.pagingYes.per_page+15,this.getAdvisories("advisoriesYes",t))},getAdvisories:function(t,e){var s=this,i="/scale-distributions",a={params:{type:"not_filled",page:this.pagingNo.page,per_page:this.pagingNo.per_page}};return"advisoriesYes"===t&&(a={params:{page:this.pagingYes.page,per_page:this.pagingYes.per_page}},i="/filled-scales"),console.log(a),c.a.get(i,a).then(function(i){s[t]=i.data.data,s[t].map(function(e){"advisoriesYes"===t&&(e.updated_at=s.$moment.unix(e.latest_scale_distribution.updated_at).format("YYYY.MM.DD HH:mm:ss"))}),e&&e(!0)})}},mounted:function(){var t=this,e=this.$refs.tab;this.contentTop=e.$el.clientHeight+"px",this.contentHeight=i.c.height-e.$el.clientHeight+"px",this.getAdvisories("advisoriesNo").then(function(e){t.getAdvisories("advisoriesYes")}),document.documentElement.scrollTop=document.body.scrollTop=0},created:function(){this.$route.query.swiperIndex&&(this.swiperIndex=this.$route.query.swiperIndex)}}),p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"record"}},[s("tab",{ref:"tab",attrs:{"line-width":3,"custom-bar-width":"100px","active-color":"#6595F4"},model:{value:t.swiperIndex,callback:function(e){t.swiperIndex=e},expression:"swiperIndex"}},[s("tab-item",{staticClass:"vux-center"},[t._v("未完成")]),t._v(" "),s("tab-item",{staticClass:"vux-center"},[t._v("已完成")])],1),t._v(" "),0===t.swiperIndex?s("div",{staticClass:"not-used"},[s("scroller",{staticStyle:{width:"100%"},style:{height:t.contentHeight,top:t.contentTop},attrs:{"on-refresh":t.refresh,"on-infinite":t.infinite,noDataText:""}},[s("div",{staticClass:"scroller-box"},[s("group",t._l(t.advisoriesNo,function(e){return s("cell",{key:e.name,attrs:{"is-link":"",link:"scale-details/"+e.id}},[s("div",{staticClass:"scale-lists",attrs:{slot:"title"},slot:"title"},[s("svg-icon",{staticClass:"icon-scale",attrs:{"icon-class":"patient_icon_information"}}),t._v(" "),s("div",{staticClass:"scale-text"},[s("p",[t._v(t._s(e.scale.title))]),t._v(" "),e.doctor?s("p",[t._v("发放医生："+t._s(e.doctor.name))]):t._e()])],1)])}))],1)]),t._v(" "),0===t.advisoriesNo.length?s("div",{staticClass:"no-data",style:{height:t.contentHeight}},[s("svg-icon",{staticClass:"no-data-icon",attrs:{"icon-class":"emptystate_img_advisory"}}),t._v(" "),s("p",{staticClass:"title"},[t._v("暂无测评记录")]),t._v(" "),s("p",{staticClass:"decs"},[t._v("了解您的睡眠健康及心理状况")])],1):t._e()],1):t._e(),t._v(" "),1===t.swiperIndex?s("div",{staticClass:"already-used"},[s("scroller",{staticStyle:{width:"100%"},style:{height:t.contentHeight,top:t.contentTop},attrs:{"on-refresh":t.refresh,"on-infinite":t.infinite,noDataText:""}},[s("div",{staticClass:"scroller-box"},[s("group",t._l(t.advisoriesYes,function(e){return s("cell",{key:e.name,staticClass:"data-list",attrs:{link:"scale-details/"+e.latest_scale_distribution.id+"?scale_id_v2="+e.id}},[s("div",{staticClass:"scale-text",attrs:{slot:"title"},slot:"title"},[s("p",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"time"},[t._v("最近测评："+t._s(e.updated_at))])])])}))],1)]),t._v(" "),0===t.advisoriesYes.length?s("div",{staticClass:"no-data",style:{height:t.contentHeight}},[s("svg-icon",{staticClass:"no-data-icon",attrs:{"icon-class":"emptystate_img_advisory"}}),t._v(" "),s("p",{staticClass:"title"},[t._v("暂无测评记录")]),t._v(" "),s("p",{staticClass:"decs"},[t._v("了解您的睡眠健康及心理状况")])],1):t._e()],1):t._e()],1)},staticRenderFns:[]};var g=s("VU/8")(d,p,!1,function(t){s("rRJr")},null,null);e.default=g.exports},rRJr:function(t,e){}});