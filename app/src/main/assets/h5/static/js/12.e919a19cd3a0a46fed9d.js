webpackJsonp([12],{"5Fc5":function(t,e){},UIMx:function(t,e,o){"use strict";var s=o("piuB"),i=(s.b,String,{mounted:function(){},name:"tabbar",mixins:[s.b],props:{iconClass:String}}),a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"weui-tabbar"},[this._t("default")],2)},staticRenderFns:[]};var n=o("VU/8")(i,a,!1,function(t){o("gXWh")},null,null);e.a=n.exports},ar3x:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("Dd8w"),i=o.n(s),a=o("lRwf"),n=o.n(a),r=o("UIMx"),c=o("dgEa"),d=o("63CM"),u=o("HD9R"),l=o("Y52p"),h=o("NYxO"),b=o("gyMJ"),v=o("mHYM"),p=o("o0rJ"),f=o("SpbH"),_=o.n(f),m=(Object(h.b)({profile:function(t){return t.user.profile}}),d.a,r.a,c.a,u.a,l.a,{computed:Object(h.b)({profile:function(t){return t.user.profile}}),directives:{TransferDom:d.a},components:{Tabbar:r.a,TabbarItem:c.a,Popup:u.a,XImg:l.a},data:function(){return{bindLabel:"绑定为我的主治医生",isBind:!1,doctorId:"",showPopup:!1,doctorInfo:{avatar:"#"},downArrow:_.a,showDetailBtn:!1,showAll:!1}},watch:{showPopup:function(t){var e=this;t&&setTimeout(function(){e.showPopup=!1,e.$router.push({path:"/my-doctor"})},2e3)}},methods:{getDoctorInfo:function(t){var e=this;b.a.get("doctors/"+t,{params:{include:"services"}}).then(function(t){e.doctorInfo=t.data,n.a.nextTick(function(){e.$refs.doc_des.getBoundingClientRect().height>120&&(e.showDetailBtn=!0)})}).catch(function(t){404===t.status_code?e.$vux.toast.text("该二维码已失效","bottom"):e.$vux.toast.text(t.message,"bottom")})},showDetail:function(){this.showAll=!0},tryBindDoctor:function(t){var e=this;this.$route.query.openid?this.bindDoctor(t,this.$route.query.openid):this.$store.dispatch("GetUserProfile").then(function(){e.profile.doctor?e.profile.doctor.id===parseInt(e.$route.params.id)?2===Object(v.a)()?Object(p.a)(function(t){t.callHandler("bindDoctorResult",{code:0,message:"已绑定过该医生",result:e.profile.doctor})}):e.$router.push("/my-doctor"):e.$vux.toast.text("您已绑定了其他医生","bottom"):e.bindDoctor(t)})},bindDoctor:function(t,e){var o=this,s={doctor_id:Number(t)};e&&(s.open_id=e,s.union_id=this.$route.query.unionid),b.a.patch("doctor-bind",s).then(function(e){var s=e.data;if(s.error)1===s.error.code?o.$vux.toast.text(s.error.user_message,"bottom"):o.$router.push("/my-doctor?doctorId="+t);else{if(2===Object(v.a)())return void Object(p.a)(function(t){t.callHandler("bindDoctorResult",{code:0,message:"绑定成功",result:e.data})});var a=i()({},o.profile);a.doctor=e.data,o.$store.commit("SET_PROFILE",a),o.$vux.toast.text("绑定成功","bottom"),o.$router.push("/my-doctor?doctorId="+t)}}).catch(function(t){403===t.status_code?(o.isBind=!0,o.$vux.toast.text(t.message,"bottom")):404===t.status_code?o.$vux.toast.text("该二维码已失效","bottom"):o.$vux.toast.text(t.message,"bottom")})}},created:function(){this.doctorId=this.$route.params.id,this.getDoctorInfo(this.doctorId)}}),g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticStyle:{"background-color":"#F2F3F5"}},[o("div",[o("section",[o("div",{staticClass:"header bg_color_white"},[o("div",{staticClass:"box_shadow"},[o("img",{staticClass:"header_img",attrs:{src:t.doctorInfo.avatar}})]),t._v(" "),o("div",{staticClass:"header_right"},[o("h4",{staticClass:"intro_name"},[t._v(t._s(t.doctorInfo.name))]),t._v(" "),o("span",{},[t._v(t._s(t.doctorInfo.hospital)+"  "+t._s(t.doctorInfo.department))])])])])]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"bg_color_white"},[o("div",{ref:"doc_des",class:!t.showAll&&t.showDetailBtn?"desc":"description"},[o("p",{domProps:{innerHTML:t._s(t.doctorInfo.introduction)}}),t._v(" "),t.showDetailBtn&&!t.showAll?o("div",{staticClass:"detail",on:{click:t.showDetail}},[t._v("详细信息"),o("x-img",{attrs:{src:t.downArrow}})],1):t._e()])]),t._v(" "),o("Tabbar",{staticClass:"tab_bar"},[o("Tabbar-item",{attrs:{disabled:{isBind:t.isBind}},on:{"on-item-click":function(e){t.tryBindDoctor(t.doctorId)}}},[o("span",{staticClass:"bar",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.bindLabel))])])],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg_color_white"},[e("div",{staticClass:"title"},[e("span",[this._v("医生简介")])])])}]};var x=o("VU/8")(m,g,!1,function(t){o("5Fc5")},"data-v-7895a86c",null);e.default=x.exports},dgEa:function(t,e,o){"use strict";var s=o("piuB"),i=(String,Number,{name:"badge",props:{text:[String,Number]}}),a={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{class:["vux-badge",{"vux-badge-dot":void 0===this.text,"vux-badge-single":void 0!==this.text&&1===this.text.toString().length}],domProps:{textContent:this._s(this.text)}})},staticRenderFns:[]};var n=o("VU/8")(i,a,!1,function(t){o("oR1u")},null,null).exports,r=(s.a,Boolean,String,String,Object,String,{name:"tabbar-item",components:{Badge:n},mounted:function(){this.$slots.icon||(this.simple=!0),this.$slots["icon-active"]&&(this.hasActiveIcon=!0)},mixins:[s.a],props:{showDot:{type:Boolean,default:!1},badge:String,link:[String,Object],iconClass:String},computed:{isActive:function(){return this.$parent.index===this.currentIndex}},data:function(){return{simple:!1,hasActiveIcon:!1}}}),c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("a",{staticClass:"weui-tabbar__item",class:{"weui-bar__item_on":t.isActive,"vux-tabbar-simple":t.simple},attrs:{href:"javascript:;"},on:{click:function(e){t.onItemClick(!0)}}},[t.simple?t._e():o("div",{staticClass:"weui-tabbar__icon",class:[t.iconClass||t.$parent.iconClass,{"vux-reddot":t.showDot}]},[t.simple||t.hasActiveIcon&&t.isActive?t._e():t._t("icon"),t._v(" "),!t.simple&&t.hasActiveIcon&&t.isActive?t._t("icon-active"):t._e(),t._v(" "),t.badge?o("sup",[o("badge",{attrs:{text:t.badge}})],1):t._e()],2),t._v(" "),o("p",{staticClass:"weui-tabbar__label"},[t._t("label")],2)])},staticRenderFns:[]},d=o("VU/8")(r,c,!1,null,null,null);e.a=d.exports},gXWh:function(t,e){},oR1u:function(t,e){}});
//# sourceMappingURL=12.e919a19cd3a0a46fed9d.js.map