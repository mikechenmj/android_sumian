webpackJsonp([15],{"4hJ+":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Dd8w"),r=i.n(n),o=i("rHil"),a=i("1DHf"),s=i("Msp2"),c=i("63CM"),u=i("NYxO"),l=i("gyMJ"),h=i("+4yL"),d=(c.a,r()({},Object(u.b)({profile:function(e){return e.user.profile}}),{height:{get:function(){var e=this.profile.height;return e?e+"cm":"未选择"},set:function(e){this.heightSource.model=e}},heightObject:function(){var e=this.profile.height;if(!e)return["170",".","0","cm"];var t=(e=(e=e.replace("c","")).replace("m","")).split(".");return t.length<2?["170",".","0","cm"]:[t[0],".",t[1],"cm"]},weight:{get:function(){var e=this.profile.weight;return e?e+"kg":"未选择"},set:function(e){this.heightSource.model=e}},weightObject:function(){var e=this.profile.weight;if(!e)return["50",".","0","kg"];var t=(e=(e=e.replace("k","")).replace("g","")).split(".");return t.length<2?["50",".","0","kg"]:[t[0],".",t[1],"kg"]},birthday:{get:function(){var e=this.profile.birthday;return e?"未设置"===e?"请选择":e:"请选择"},set:function(e){this.dateSource.dataSource.model=e}},birthdayObject:function(){var e=this.profile.birthday;if(!e)return["1980","1"];var t=e.split("-");if(t.length<2)return["1980","1"];var i=t[0],n=t[1];return[i,this.pad(n,2)]},education:{get:function(){var e=this.profile.education;return e||"请选择"},set:function(e){this.educationSource.model=e}},educationObject:function(){var e=this.profile.education;return e&&"secrecy"!==e?[e]:[]},genderObject:function(){var e=this.profile.gender;return e&&"secrecy"!==e?[e]:[]},gender:{get:function(){var e=this.profile.gender;if(console.log(this.profile.gender,"xq"),!e)return"请选择";var t="男";return"female"===e?t="女":"secrecy"===e&&(t="请选择"),t},set:function(e){this.genderSource.model=e}}}),o.a,a.a,s.a,h.a,{directives:{TransferDom:c.a},computed:r()({},Object(u.b)({profile:function(e){return e.user.profile}}),{height:{get:function(){var e=this.profile.height;return e?e+"cm":"未选择"},set:function(e){this.heightSource.model=e}},heightObject:function(){var e=this.profile.height;if(!e)return["170",".","0","cm"];var t=(e=(e=e.replace("c","")).replace("m","")).split(".");return t.length<2?["170",".","0","cm"]:[t[0],".",t[1],"cm"]},weight:{get:function(){var e=this.profile.weight;return e?e+"kg":"未选择"},set:function(e){this.heightSource.model=e}},weightObject:function(){var e=this.profile.weight;if(!e)return["50",".","0","kg"];var t=(e=(e=e.replace("k","")).replace("g","")).split(".");return t.length<2?["50",".","0","kg"]:[t[0],".",t[1],"kg"]},birthday:{get:function(){var e=this.profile.birthday;return e?"未设置"===e?"请选择":e:"请选择"},set:function(e){this.dateSource.dataSource.model=e}},birthdayObject:function(){var e=this.profile.birthday;if(!e)return["1980","1"];var t=e.split("-");if(t.length<2)return["1980","1"];var i=t[0],n=t[1];return[i,this.pad(n,2)]},education:{get:function(){var e=this.profile.education;return e||"请选择"},set:function(e){this.educationSource.model=e}},educationObject:function(){var e=this.profile.education;return e&&"secrecy"!==e?[e]:[]},genderObject:function(){var e=this.profile.gender;return e&&"secrecy"!==e?[e]:[]},gender:{get:function(){var e=this.profile.gender;if(console.log(this.profile.gender,"xq"),!e)return"请选择";var t="男";return"female"===e?t="女":"secrecy"===e&&(t="请选择"),t},set:function(e){this.genderSource.model=e}}}),components:{Group:o.a,Cell:a.a,Actionsheet:s.a,PickerSleepDoctor:h.a},data:function(){for(var e,t=[],i=80;i<=250;i++)t.push(i.toString());for(var n=[],r=0;r<=9;r++)n.push(r.toString());e=[t,["."],n,["cm"]];for(var o=[],a=new Date,s=a.getFullYear(),c=a.getMonth()+1,u=1920;u<=s;u++)if(o.push({parent:"0",name:u.toString(),value:u.toString()}),u!==s)for(var l=1;l<=12;l++)o.push({parent:u.toString(),name:l.toString(),value:l.toString()});for(var h=1;h<=c;h++)o.push({parent:s.toString(),name:h.toString(),value:h.toString()});for(var d=[],f=20;f<=200;f++)d.push(f.toString());for(var g=[],v=0;v<=9;v++)g.push(v.toString());return{show:!1,isShowPicker:!1,typeEnum:{gender:"gender",date:"date",height:"height",weight:"weight",none:"none",education:"education"},dataPicker:{title:"出生年月",type:"none",dataSource:{itemList:o,model:[],columns:2}},dateSource:{title:"出生年月",type:"date",dataSource:{itemList:o,model:[],columns:2}},educationSource:{title:"教育程度",type:"education",dataSource:{itemList:[{name:"本科或以上",value:"本科或以上"},{name:"大专",value:"大专"},{name:"高中",value:"高中"},{name:"初中或以下",value:"初中或以下"},{name:"其它",value:"其它"}],model:[],columns:2}},genderSource:{title:"性别",type:"gender",dataSource:{itemList:[[{name:"男",value:"male"},{name:"女",value:"female"}]],model:[],columns:void 0}},heightSource:{title:"身高",type:"height",dataSource:{itemList:e,model:[],columns:void 0}},weightSource:{title:"体重",type:"weight",dataSource:{itemList:[d,["."],g,["kg"]],model:[],columns:void 0}},menus:[{label:"是否要将微信号与手机解绑？",type:"disabled"},{label:"解绑",value:"untie",type:"warn"}]}},methods:{changePicker:function(e){var t=e;switch(this.dataPicker.type){case"gender":this.updateProfile(t.data[0],"gender");break;case"date":this.updateProfile(this.getDateString(),"birthday");break;case"height":this.updateProfile(this.heightFormat(t.data),"height");break;case"weight":this.updateProfile(this.weightFormat(t.data),"weight");break;case"education":this.updateProfile(t.data[0],"education")}this.onPickerHide()},heightFormat:function(e){return!e||e.length<4?"50.0kg":e[0]+e[1]+e[2]},weightFormat:function(e){return!e||e.length<4?"170.0cm":e[0]+e[1]+e[2]},dateFormat:function(e){return e.length<2?void 0:[e[0],this.pad(e[1],2)].join("-")},getDateString:function(){var e=this.dateSource.dataSource.model,t=this.dateFormat(e,void 0);return t&&t.length>0?t:void 0},pad:function(e,t){for(var i=(e+"").length;i++<t;)e="0"+e;return e},showPickewithType:function(e){this.isShowPicker=!0,e===this.typeEnum.date?(this.dateSource.dataSource.model=this.birthdayObject,this.dataPicker=this.dateSource):e===this.typeEnum.gender?(this.genderSource.dataSource.model=this.genderObject,this.dataPicker=this.genderSource):e===this.typeEnum.height?(this.heightSource.dataSource.model=this.heightObject,this.dataPicker=this.heightSource):e===this.typeEnum.weight?(this.weightSource.dataSource.model=this.weightObject,this.dataPicker=this.weightSource):e===this.typeEnum.education&&(this.educationSource.dataSource.model=this.educationObject,this.dataPicker=this.educationSource),this.pickerType=e},currentDataSource:function(e){return e===this.typeEnum.gender?this.genderSource:e===this.typeEnum.date?this.dateSource:e===this.typeEnum.height?this.heightSource:this.weightSource},updateProfile:function(e,t){var i=this,n={};n[t]=e,l.a.patch("user/profile",n).then(function(e){var t=e.data;i.$store.commit("SET_PROFILE",t),i.$vux.toast.text("修改成功"),i.$vux.loading.hide()}).catch(function(e){i.$vux.toast.text(e.message),i.$vux.loading.hide()})},joinTextArrayWithPlaceHolder:function(e,t){return e&&0!==e.length?e.join(","):t},onPickerHide:function(){this.isShowPicker=!1},onLogout:function(){var e=this;this.$vux.confirm.show({content:"确认退出?",onConfirm:function(){e.$store.dispatch("Logout"),e.$router.push({name:"login"})}})},onUnbind:function(e){if(console.log(e,"key"),"untie"===e){var t=this.profile.socialites.filter(function(e){return 1===e.type});if(console.log(t),t)return void this.$vux.toast.text("未绑定微信");this.$vux.confirm.show({content:"确认解绑?",onConfirm:function(){l.a.delete("socialites/"+t[0].id).then(function(){}).catch(function(){})}})}}},created:function(){var e=this;this.$store.dispatch("GetUserProfile").catch(function(){e.$vux.toast.text("获取用户信息失败")})}}),f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile-page"},[n("group",{staticClass:"no-link"},[n("cell",{staticClass:"avatar",attrs:{title:"头像"}},[n("div",{staticClass:"avatar-img"},[n("img",{attrs:{src:e.profile.avatar?e.profile.avatar:i("1LRf"),alt:""}})])]),e._v(" "),n("cell",{attrs:{title:"昵称",value:e.profile.nickname?e.profile.nickname:"未设置"}}),e._v(" "),n("cell",{attrs:{title:"注册手机",value:e.profile.mobile}})],1),e._v(" "),n("group",[n("cell",{attrs:{title:"我的目标","is-link":"",link:"/my-target?from=mine"}})],1),e._v(" "),n("group",[n("cell",{attrs:{title:"真实姓名",value:e.profile.name?e.profile.name:"请输入","is-link":"",link:"/modify-name"}}),e._v(" "),n("cell",{attrs:{title:"性别",value:e.gender,"is-link":""},nativeOn:{click:function(t){e.showPickewithType("gender")}}}),e._v(" "),n("cell",{attrs:{title:"出生年月",value:e.birthday,"is-link":""},nativeOn:{click:function(t){e.showPickewithType("date")}}}),e._v(" "),n("cell",{attrs:{title:"身高",value:e.height,"is-link":""},nativeOn:{click:function(t){e.showPickewithType("height")}}}),e._v(" "),n("cell",{attrs:{title:"体重",value:e.weight,"is-link":""},nativeOn:{click:function(t){e.showPickewithType("weight")}}}),e._v(" "),n("cell",{attrs:{title:"教育程度",value:e.education,"is-link":""},nativeOn:{click:function(t){e.showPickewithType("education")}}}),e._v(" "),n("cell",{attrs:{title:"职业",value:e.profile.career?e.profile.career:"请输入","is-link":"",link:"/occupation"}})],1),e._v(" "),n("div",{staticClass:"remark"},[e._v("以上个人信息仅供医生参考，不予公开。")]),e._v(" "),n("picker-sleep-doctor",{attrs:{title:e.dataPicker.title,submitText:"确定",isShow:e.isShowPicker,dataSource:e.dataPicker.dataSource},on:{"on-submit":e.changePicker,"on-hide":e.onPickerHide}})],1)},staticRenderFns:[]};var g=i("VU/8")(d,f,!1,function(e){i("Hd0u")},null,null);t.default=g.exports},Hd0u:function(e,t){},JYLN:function(e,t){},Msp2:function(e,t,i){"use strict";var n=i("mvHQ"),r=i.n(n),o=i("pFYg"),a=i.n(o),s=(Boolean,Boolean,String,String,Object,Array,Boolean,Boolean,{name:"actionsheet",mounted:function(){var e=this;this.hasHeaderSlot=!!this.$slots.header,this.$nextTick(function(){e.$tabbar=document.querySelector(".weui-tabbar"),e.$refs.iOSMenu&&e.$refs.iOSMenu.addEventListener("transitionend",e.onTransitionEnd)})},props:{value:Boolean,showCancel:Boolean,cancelText:String,theme:{type:String,default:"ios"},menus:{type:[Object,Array],default:function(){return{}}},closeOnClickingMask:{type:Boolean,default:!0},closeOnClickingMenu:{type:Boolean,default:!0}},data:function(){return{hasHeaderSlot:!1,show:!1}},methods:{onTransitionEnd:function(){this.$emit(this.show?"on-after-show":"on-after-hide")},onMenuClick:function(e,t){"string"==typeof e?this.emitEvent("on-click-menu",t,e):"disabled"!==e.type&&"info"!==e.type&&(e.value||0===e.value?this.emitEvent("on-click-menu",e.value,e):(this.emitEvent("on-click-menu","",e),this.show=!1))},onClickingMask:function(){this.$emit("on-click-mask"),this.closeOnClickingMask&&(this.show=!1)},emitEvent:function(e,t,i){if("on-click-menu"===e&&!/.noop/.test(t)){var n=i;"object"===(void 0===n?"undefined":a()(n))&&(n=JSON.parse(r()(n))),this.$emit(e,t,n),this.$emit(e+"-"+t),this.closeOnClickingMenu&&(this.show=!1)}},fixIos:function(e){this.$el.parentNode&&-1!==this.$el.parentNode.className.indexOf("v-transfer-dom")||this.$tabbar&&/iphone/i.test(navigator.userAgent)&&(this.$tabbar.style.zIndex=e)}},watch:{show:function(e){var t=this;this.$emit("input",e),e?this.fixIos(-1):setTimeout(function(){t.fixIos(100)},200)},value:{handler:function(e){this.show=e},immediate:!0}},beforeDestroy:function(){this.fixIos(100),this.$refs.iOSMenu&&this.$refs.iOSMenu.removeEventListener("transitionend",this.onTransitionEnd)}}),c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vux-actionsheet"},[i("transition",{attrs:{name:"vux-actionsheet-mask"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"weui-mask weui-mask_transparent",on:{click:e.onClickingMask}})]),e._v(" "),"android"===e.theme?i("div",{staticClass:"weui-skin_android"},[i("transition",{attrs:{name:"vux-android-actionsheet"},on:{"after-enter":function(t){e.$emit("on-after-show")},"after-leave":function(t){e.$emit("on-after-hide")}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"weui-actionsheet"},[i("div",{staticClass:"weui-actionsheet__menu"},e._l(e.menus,function(t,n){return i("div",{staticClass:"weui-actionsheet__cell",domProps:{innerHTML:e._s(t.label||t)},on:{click:function(i){e.onMenuClick(t,n)}}})}))])])],1):i("div",{ref:"iOSMenu",staticClass:"weui-actionsheet",class:{"weui-actionsheet_toggle":e.show}},[i("div",{staticClass:"weui-actionsheet__menu"},[e.hasHeaderSlot?i("div",{staticClass:"weui-actionsheet__cell"},[e._t("header")],2):e._e(),e._v(" "),e._l(e.menus,function(t,n){return i("div",{staticClass:"weui-actionsheet__cell",class:"vux-actionsheet-menu-"+(t.type||"default"),domProps:{innerHTML:e._s(t.label||t)},on:{click:function(i){e.onMenuClick(t,n)}}})})],2),e._v(" "),e.showCancel?i("div",{staticClass:"weui-actionsheet__action",on:{click:function(t){e.emitEvent("on-click-menu","cancel")}}},[i("div",{staticClass:"weui-actionsheet__cell"},[e._v(e._s(e.cancelText||"取消"))])]):e._e()])],1)},staticRenderFns:[]};var u=i("VU/8")(s,c,!1,function(e){i("JYLN")},null,null);t.a=u.exports}});
//# sourceMappingURL=15.d37c9d56b7fc64f35f35.js.map