webpackJsonp([52],{"Eg8/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("aQR8"),s=a("rHil"),i=a("32ER"),c=a("odqc"),o=a("Znkm"),r=a("1DHf"),l=a("pDNl"),d=a("2sLL"),p=a("gyMJ"),h=(s.a,i.a,c.a,o.a,r.a,l.a,d.a,{name:"exchange-core",components:{Group:s.a,CellBox:i.a,Tab:c.a,TabItem:o.a,Cell:r.a,XInput:l.a,XButton:d.a},data:function(){return{swiperIndex:0,contentHeight:"",contentTop:"",exchangeRecord:[],exchangeNum:"",pagingYes:{page:1,per_page:15}}},methods:{refresh:function(e){this.pagingYes.per_page=15,this.getAdvisories(e)},infinite:function(e){this.pagingYes.per_page=this.pagingYes.per_page+15,this.getAdvisories(e)},exchange:function(){var e=this;this.exchangeNum?(this.$vux.loading.show(),p.a.post("redeem-codes/exchange",{code:this.exchangeNum}).then(function(t){e.$vux.toast.text(t.data.message),e.exchangeNum="",e.swiperIndex=1,e.$vux.loading.hide()}).catch(function(t){e.$vux.toast.text(t.error.internal_message),e.$vux.loading.hide()})):this.$vux.toast.text("兑换码不能为空")},getAdvisories:function(e){var t=this,a={params:{page:this.pagingYes.page,per_page:this.pagingYes.per_page}};return p.a.get("/redeem-codes",a).then(function(a){t.exchangeRecord=a.data.data,t.exchangeRecord.map(function(e){e.batch.updated_at=t.$moment.unix(e.batch.updated_at).format("YYYY.MM.DD")}),e&&e(!0)})}},mounted:function(){var e=this.$refs.tab;this.contentTop=e.$el.clientHeight+"px",this.contentHeight=n.c.height-e.$el.clientHeight+"px",this.getAdvisories(),document.documentElement.scrollTop=document.body.scrollTop=0},created:function(){}}),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"exchange-core"}},[a("tab",{ref:"tab",attrs:{"line-width":3,"custom-bar-width":"100px","active-color":"#6595F4"},model:{value:e.swiperIndex,callback:function(t){e.swiperIndex=t},expression:"swiperIndex"}},[a("tab-item",{staticClass:"vux-center"},[e._v("未完成")]),e._v(" "),a("tab-item",{staticClass:"vux-center"},[e._v("已完成")])],1),e._v(" "),0===e.swiperIndex?a("div",{staticClass:"not-used"},[a("group",{staticStyle:{"margin-top":".2rem"}},[a("x-input",{attrs:{title:"兑换码",placeholder:"请输入您的兑换码",novalidate:"","placeholder-align":"left","show-clear":!1,max:16},model:{value:e.exchangeNum,callback:function(t){e.exchangeNum=t},expression:"exchangeNum"}})],1),e._v(" "),a("div",{staticClass:"btn-wrapper"},[a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.exchange(t)}}},[e._v("兑换")])],1)],1):e._e(),e._v(" "),1===e.swiperIndex?a("div",{staticClass:"already-used"},[a("scroller",{staticStyle:{width:"100%"},style:{height:e.contentHeight,top:e.contentTop},attrs:{"on-refresh":e.refresh,"on-infinite":e.infinite,noDataText:""}},[a("div",{staticClass:"scroller-box"},[a("group",e._l(e.exchangeRecord,function(t){return a("cell",{key:t.name,staticClass:"data-list"},[a("div",{staticClass:"data-text",attrs:{slot:"title"},slot:"title"},[a("p",{staticClass:"title"},[e._v(e._s(t.batch.name))]),e._v(" "),a("p",{staticClass:"time"},[e._v("兑换时间："+e._s(t.batch.updated_at))]),e._v(" "),a("div",{staticClass:"type"},[e._v(e._s(1===t.status?"已使用":"未使用"))])])])}))],1)]),e._v(" "),0===e.exchangeRecord.length?a("div",{staticClass:"no-data",style:{height:e.contentHeight}},[a("svg-icon",{staticClass:"no-data-icon",attrs:{"icon-class":"emptystate_img_redemption"}}),e._v(" "),a("p",{staticClass:"title"},[e._v("暂无兑换记录")]),e._v(" "),a("p",{staticClass:"decs"},[e._v("使用兑换码后，可在此查看兑换记录")])],1):e._e()],1):e._e()],1)},staticRenderFns:[]};var u=a("VU/8")(h,g,!1,function(e){a("GPip")},null,null);t.default=u.exports},GPip:function(e,t){}});