webpackJsonp([5,34],{"1Buf":function(t,e){},"2UMw":function(t,e){},"3SDK":function(t,e){},AoEW:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("2sLL"),i=s("rHil"),a=s("1DHf"),r=s("32ER"),c=(n.a,i.a,a.a,r.a,String,{name:"cbti-result",components:{XButton:n.a,Group:i.a,Cell:a.a,CellBox:r.a},props:{type:{type:String,default:"judgment"},resultData:null,exercises:null},computed:{checkboxData:{get:function(){var t=this,e=[];return"checkbox"===this.type&&this.resultData.map(function(s,n){var i=t.exercises.data[n],a={title:"【"+i.question+"】",answer:[]};s.split(",").map(function(t){""===t?a.answer.push("——"):a.answer.push("• "+i.selection[t])}),e.push(a)}),e}}},created:function(){console.log(this.resultData,this.exercises,"cbti-result.vue")}}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cbti-result"},["judgment"===t.type?s("div",{staticClass:"Judgment"},[s("p",{staticClass:"title"},[t._v("\n      以下描述您觉得是否正确？正确请选“✓”，错误请选“✗”\n    ")]),t._v(" "),s("div",{staticClass:"content"},[s("svg-icon",{staticClass:"cbti_icon_success",attrs:{"icon-class":"cbti_icon_success"}}),t._v(" "),s("p",[t._v("恭喜你已完成课程")]),t._v(" "),s("div",{on:{click:function(e){t.$emit("resultSubmit","judgment")}}},[s("x-button",{staticClass:"submit",attrs:{type:"primary"}},[t._v("完成")])],1)],1)]):t._e(),t._v(" "),t.resultData&&"scale"===t.type?s("div",{staticClass:"scale"},[s("group",[s("cell",{attrs:{title:"评测结果"}}),t._v(" "),s("cell-box",[s("p",{staticClass:"result"},[t._v(t._s(t.resultData.result.result))]),t._v(" "),s("p",{staticClass:"score"},[t._v("评测分数："+t._s(t.resultData.result.score)+"分")])]),t._v(" "),s("cell-box",[s("p",{staticClass:"time"},[t._v("\n          评测时间："+t._s(t.$moment.unix(t.resultData.result.updated_at).format("YYYY-MM-DD hh:mm"))+"\n        ")]),t._v(" "),s("p",{staticClass:"comment"},[t._v("\n          测评建议："+t._s(t.resultData.result.comment)+"\n        ")])])],1),t._v(" "),s("div",{on:{click:function(e){t.$emit("resultSubmit","scale")}}},[s("x-button",{staticClass:"submit-btn",attrs:{type:"primary"},on:{click:function(e){t.$emit("resultSubmit","primary")}}},[t._v("重新测评")])],1)],1):t._e(),t._v(" "),"checkbox"===t.type?s("div",{staticClass:"checkbox"},[s("group",[s("cell",{attrs:{title:"测评结果"}}),t._v(" "),s("cell-box",[s("p",{staticClass:"time"},[t._v("\n          评测时间："+t._s(t.$moment().format("YYYY-MM-DD hh:mm"))+"\n        ")]),t._v(" "),s("div",{staticClass:"comment"},[s("p",[t._v("测评结果：以下都是导致你失眠的因素")]),t._v(" "),s("br"),t._v(" "),t._l(t.checkboxData,function(e){return s("div",{key:e.id},[s("p",[t._v(t._s(e.title))]),t._v(" "),t._l(e.answer,function(e){return s("p",{key:e.id},[t._v(t._s(e))])}),t._v(" "),s("br")],2)})],2)])],1),t._v(" "),s("group",[s("cell",{attrs:{title:"结果分析"}}),t._v(" "),s("cell-box",[s("div",{staticClass:"comment"},[t._v("\n          "+t._s(t.exercises.final_words)+"\n        ")])])],1),t._v(" "),s("div",{on:{click:function(e){t.$emit("resultSubmit","checkbox")}}},[s("x-button",{staticClass:"submit-btn",attrs:{type:"primary"}},[t._v("重新测评")])],1)],1):t._e()])},staticRenderFns:[]};var o=s("VU/8")(c,l,!1,function(t){s("p1ai")},null,null);e.default=o.exports},VzH6:function(t,e,s){"use strict";Array,String,String,Number;var n={name:"sleep-form-radio",props:{radioData:{type:Array},current:String,page:String,default:{type:Number,default:null}},data:function(){return{selectIndex:null}},watch:{radioData:function(){this.selectIndex=this.default}},methods:{select:function(t){if(this.selectIndex=t,this.current&&this.page&&this.$parent[this.current]<this.$parent[this.page]){var e=[this.radioData[t],t];this.$emit.apply(this,["change"].concat(e))}}},mounted:function(){this.selectIndex=this.default}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sleep-form-radio"},[s("div",{staticClass:"options-list center-list"},t._l(t.radioData,function(e,n){return s("div",{key:e.id,staticClass:"option",on:{click:function(e){t.select(n)}}},[s("svg-icon",{staticClass:"icon-selected",class:t.selectIndex===n?"active":"",attrs:{"icon-class":t.selectIndex===n?"login_icon_selected":"login_icon_unselected"}}),t._v("\n      "+t._s(e.name)+"\n    ")],1)}))])},staticRenderFns:[]};var a=s("VU/8")(n,i,!1,function(t){s("2UMw")},null,null).exports,r=(String,String,String,String,{name:"sleep-form-home",props:{title:{type:String,default:""},text:{type:String,default:""},doctorName:String,buttonText:{type:String,default:""}},methods:{submit:function(){console.log("home submit"),this.$emit("on-submit")}}}),c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sleep-form-home"},[s("div",{staticClass:"sleep-form-bg"},[s("h1",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),s("p",{staticClass:"text"},[t._v(t._s(t.text))]),t._v(" "),t.doctorName?s("p",{staticClass:"doctor"},[t._v("发放医生："+t._s(t.doctorName))]):t._e(),t._v(" "),s("div",{staticClass:"submit",on:{click:t.submit}},[t._v("\n      "+t._s(t.buttonText)+"\n    ")])])])},staticRenderFns:[]};var l=s("VU/8")(r,c,!1,function(t){s("3SDK")},null,null).exports,o=(Array,String,String,String,{name:"sleep-form-checkbox",props:{checkboxData:{type:Array},current:String,page:String,prop:String},data:function(){return{selectIndex:[]}},methods:{select:function(t){var e=t,s=this.selectIndex.find(function(t){return t===e});void 0===s?this.selectIndex.push(e):this.selectIndex.splice(s,1),this.$set(this.checkboxData,e,{active:!this.checkboxData[e].active,name:this.checkboxData[e].name,value:this.checkboxData[e].value}),this.$parent.$parent.result[this.prop]={data:this.checkboxData,type:"checkbox"}}}}),u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"sleep-form-checkbox"},[s("div",{staticClass:"options-list",class:{"center-list":t.checkboxData.length<5}},t._l(t.checkboxData,function(e,n){return s("div",{key:e.id,staticClass:"option",on:{click:function(e){t.select(n)}}},[s("svg-icon",{staticClass:"icon-selected",class:e.active?"active":"",attrs:{"icon-class":e.active?"login_icon_selected":"login_icon_unselected"}}),t._v("\n      "+t._s(e.name)+"\n    ")],1)}))])},staticRenderFns:[]};var h=s("VU/8")(o,u,!1,function(t){s("1Buf")},null,null).exports,d=s("jNWb"),p=(d.a,Function,String,Number,String,String,String,String,String,{name:"judgment",components:{SleepDialog:d.a},props:{change:{type:Function},label:{type:String,default:"未设置 label"},answer:{type:Number,default:null},message:{type:String,default:"问题解释"},result:{type:String},prop:{type:String},page:{type:String},current:{type:String}},data:function(){return{select1:null,yes:"cbti_btn_correct_default",no:"cbti_btn_wrong_default",noSelect:!0,dialog:!1,isAnswer:!0}},methods:{handleOk:function(){this.$parent[this.page]>this.$parent[this.current]+1?(this.$parent[this.current]++,this.dialog=!1,this.noSelect=!0,this.yes="cbti_btn_correct_default",this.no="cbti_btn_wrong_default",this.$parent.$parent[this.result][this.prop].data.push(!this.select1),this.select1=null):(this.$parent.$parent[this.result][this.prop].data.length<this.$parent[this.page]&&this.$parent.$parent[this.result][this.prop].data.push(!this.select1),this.$emit("overFn",this.$parent.$parent[this.result][this.prop].data))},select:function(t){this.noSelect&&(this.select1=t,this.noSelect=!1,this.dialog=!0,t===this.answer?(this.isAnswer=!0,0===t?this.yes="cbti_btn_correct_blue":this.no="cbti_btn_wrong_blue"):t!==this.answer&&(this.isAnswer=!1,0===t?this.yes="cbti_btn_correct_red":this.no="cbti_btn_wrong_red"),this.change(t))}},created:function(){}}),m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"judgment"},[s("div",{staticClass:"text"},[t._v("\n    如果白天我们感到烦躁即表示我们前一晚睡得很差。\n  ")]),t._v(" "),s("div",{staticClass:"judgment-select"},[s("div",{on:{click:function(e){t.select(0)}}},[s("svg-icon",{staticClass:"svg-icon left",attrs:{"icon-class":t.yes}})],1),t._v(" "),s("div",{on:{click:function(e){t.select(1)}}},[s("svg-icon",{staticClass:"svg-icon",attrs:{"icon-class":t.no}})],1)]),t._v(" "),s("sleep-dialog",{attrs:{cancel:!1},on:{handleOk:t.handleOk},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("div",{staticClass:"judgment-dialog",attrs:{slot:"content"},slot:"content"},[s("p",{staticClass:"title"},[t._v("大部分人都经历过睡眠差的时候。")]),t._v(" "),t.isAnswer?s("div",{staticClass:"success"},[t._v("✓ 说法正确")]):s("div",{staticClass:"error"},[t._v("✗ 说法错误")]),t._v(" "),s("div",{staticClass:"content-zi"},[t._v("\n        解释："+t._s(t.message)+"\n      ")])])])],1)},staticRenderFns:[]};var v=s("VU/8")(p,m,!1,function(t){s("edCk")},null,null).exports,_=s("Qb34"),f=(_.a,Array,String,Object,Boolean,Boolean,{name:"",components:{Home:l,Judgment:v,Radio:a,Checkbox:h,scaleQuestion:_.a},methods:{homeSubmit:function(){this.showHome=!1,this.home.callback()},reduce:function(){this.current-=1},plus:function(){this.current+1<this.page&&(this.current+=1)},change:function(t,e){this.$parent[this.result][this.items[this.current].prop]=t,this.$parent.items[this.current].default=e}},props:{items:{type:Array},result:{type:String},home:{type:Object,default:null},isSelect:{type:Boolean,default:!0},isSubmitBtn:{type:Boolean,default:!0}},data:function(){return{showData:{},showHome:!0,current:0}},computed:{showType:{get:function(){return this.items[this.current].type}},page:{get:function(){return this.items.length}}},created:function(){}}),g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sleep-form"},[t.home&&t.showHome?n("home",{attrs:{doctorName:t.home.doctor,text:t.home.text,buttonText:t.home.buttonText,title:t.home.title},on:{"on-submit":t.homeSubmit}}):t._e(),t._v(" "),t.showHome||"scale"===t.showType?t._e():n("div",{staticClass:"question"},[n("div",{staticClass:"sleep-form-header"},[t._v("\n      "+t._s(t.items[t.current].title)+"\n    ")]),t._v(" "),n("div",{staticClass:"sleep-form-bg"},["radio"===t.showType?n("radio",{attrs:{radioData:t.items[t.current].data,current:"current",page:"page",default:t.items[t.current].default},on:{change:t.change}}):t._e(),t._v(" "),"checkbox"===t.showType?n("checkbox",{attrs:{checkboxData:t.items[t.current].data,current:"current",page:"page",prop:t.items[t.current].prop,result:t.result},on:{change:t.change}}):t._e(),t._v(" "),"judgment"===t.showType?n("judgment",{attrs:{answer:t.items[t.current].answer,label:t.items[t.current].label,change:t.items[t.current].change,message:t.items[t.current].message,current:"current",page:"page",prop:t.items[t.current].prop,result:t.result},on:{overFn:function(e){t.$emit("overFn",t.showType,t.items[t.current].prop)}}}):t._e(),t._v(" "),n("div",{staticClass:"jump-btn"},[n("div",{staticClass:"btn-left"},[t.isSelect&&t.current+1>1?n("img",{attrs:{src:s("mhLV"),alt:""},on:{click:t.reduce}}):t._e()]),t._v(" "),n("div",{staticClass:"btn-submit"},[t.isSubmitBtn&&t.current+1===t.page?n("div",{staticClass:"btn",on:{click:function(e){t.$emit("overFn",t.showType)}}},[t._v("\n            生成报告\n          ")]):n("div",{staticClass:"page"},[t._v("\n            "+t._s(t.current+1)+"/"+t._s(t.page)+"\n          ")])]),t._v(" "),n("div",{staticClass:"btn-right"},[t.isSelect&&t.current+1<t.page?n("img",{attrs:{src:s("UQqC"),alt:"reduce"},on:{click:t.plus}}):t._e()])])],1)]),t._v(" "),t.showHome||"scale"!==t.showType?t._e():n("scale-question",{attrs:{type:"cbti",scaleQuestionData:t.items[t.current].data}})],1)},staticRenderFns:[]};var b=s("VU/8")(f,g,!1,function(t){s("vH0i")},null,null);e.a=b.exports},aaol:function(t,e){},edCk:function(t,e){},"k/91":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mvHQ"),i=s.n(n),a=s("VzH6"),r=s("AoEW"),c=s("gyMJ"),l=s("o0rJ"),o=s("mHYM"),u=(a.a,r.default,{name:"exercises",data:function(){return{resultType:null,result:{answer:[],final_words:"恭喜您，对睡眠知识有了初步的了解~ 接下来我们会继续与您一同了解失眠，抵抗失眠！"},items:null,home:{title:"loding",text:"loding",doctor:"",buttonText:"loding",callback:function(){console.log("callback")}},isSelect:!0,isSubmitBtn:!0,resultData:{},exercises:{},exerciseAnswers:null}},components:{SleepForm:a.a,cbtiResult:r.default},created:function(){var t=this;this.getExercises(this.$route.query.id).then(function(e){switch(document.title=e.title,t.exercises=e,t.setHome(e.guide),e.type){case 0:t.isSubmitBtn=!1,t.isSelect=!1,t.handleJudgment(e);break;case 1:t.isSubmitBtn=!0,t.isSelect=!0,t.handleCheckbox(e);break;case 2:t.handleRadio(e);break;case 3:t.handleHref(e);break;default:console.log("类型错误")}})},methods:{resultSubmit:function(t){var e=this,s=Object(o.a)();"judgment"===t?2===s?Object(l.a)(function(t){t.callHandler("onQuestionFinished",{code:0,message:"onQuestionFinished OK",result:e.exerciseAnswers})}):this.$router.go(-1):this.resultType=null},overFn:function(t,e){var s=this;this.resultType=t;var n={data:null};if("judgment"===t&&(n.data=this.result[e].data),"checkbox"===t){var a=[],r=function(t){var e=[];s.result[t].data&&s.result[t].data.map(function(t){t.active&&e.push(t.value)}),a.push(e.join(","))};for(var l in this.result)r(l);n.data=a,this.resultData=n.data}"scale"===t&&(n.data=e),console.log(this.resultData),n.data=i()(n.data),c.a.post("cbti-course/"+this.$route.query.id+"/exercise-answers",n).then(function(e){s.exerciseAnswers=e.data,"scale"===t&&(s.resultData=e.data)})},handleJudgment:function(t){var e=this;this.items=[],this.result={},this.result.j1={type:"judgment",data:[]},t.data.map(function(t){console.log(t,"asdasds");var s={title:"以下描述您觉得是否正确？正确请选“✓”，错误请选“✗”",label:t.question,type:"judgment",answer:t.answer?0:1,prop:"j1",message:t.explanation,change:function(t){console.log(t,"judgment callback")}};e.items.push(s)})},handleCheckbox:function(t){var e=this;t.exercise_is_filled&&(this.resultType="checkbox",this.resultData=[],t.data.map(function(t){e.resultData.push(t.user_answer)})),this.items=[],this.result={},t.data.map(function(t,s){var n=[];t.selection.map(function(t,e){var s={};s.value=e,s.name=t,n.push(s)});var i={title:t.question,type:"checkbox",prop:"c_"+s,data:n};e.result[i.prop]={type:"checkbox"},e.items.push(i)})},handleRadio:function(t){t.exercise_is_filled&&(this.resultType="scale",this.resultData=t.data.scale_distributions),this.items=[],this.result={};var e={title:"123123",type:"scale",prop:"scale",data:t.data.questions};this.result[e.prop]={type:"scale"},this.items.push(e),console.log(t,"asdsadasd")},handleHref:function(t){var e=this,s=null;switch(t.data.destination){case 0:s="/sleepDiary";break;case 1:s="/prescription"}this.home.callback=function(){e.$router.push(s)}},setHome:function(t){console.log(t),this.home.title=t.title,this.home.text=t.description,this.home.doctor=null,this.home.buttonText=t.button},getExercises:function(t){return c.a.get("/cbti-course/"+t+"/exercises").then(function(t){return t.data})}}}),h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"exercises"},[t.resultType?s("cbti-result",{attrs:{resultData:t.resultData,exercises:t.exercises,type:t.resultType},on:{resultSubmit:t.resultSubmit}}):s("sleep-form",{attrs:{items:t.items,home:t.home,result:"result",isSelect:t.isSelect,isSubmitBtn:t.isSubmitBtn},on:{overFn:t.overFn}})],1)},staticRenderFns:[]};var d=s("VU/8")(u,h,!1,function(t){s("aaol")},null,null);e.default=d.exports},p1ai:function(t,e){},vH0i:function(t,e){}});
//# sourceMappingURL=5.a8511c9152a8fcb39a4e.js.map