webpackJsonp([51],{CBUa:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("rHil"),i=s("32ER"),n=s("odqc"),o=s("Znkm"),c=s("aQR8"),r=s("gyMJ"),l=(n.a,o.a,a.a,i.a,{name:"bookings",components:{Tab:n.a,TabItem:o.a,Group:a.a,CellBox:i.a},data:function(){return{swiperIndex:0,contentHeight:"",contentTop:"",bookings:[1,2],page:1,per_page:15}},methods:{refresh:function(t){this.per_page=15,this.getBookings().then(function(){t(!0)})},infinite:function(t){this.per_page+=15,this.getBookings().then(function(){t(!0)})},getBookings:function(t){var e=this;t&&"reset"===t&&(this.per_page=15);var s={page:this.page,per_page:this.per_page,list_type:this.swiperIndex,include:"package.servicePackage"};return r.a.get("/bookings",{params:s}).then(function(t){e.bookings=t.data.data,e.bookings.map(function(t){t.status=c.b[t.status],t.plan_start_at=e.$moment.unix(t.plan_start_at).format("YYYY.MM.DD HH:mm"),t.created_at=e.$moment.unix(t.created_at).format("YYYY.MM.DD HH:mm"),t.updated_at=e.$moment.unix(t.updated_at).format("YYYY.MM.DD HH:mm"),t.service_length=t.package.servicePackage.service_length+c.e[t.package.servicePackage.service_length_unit]})})}},mounted:function(){var t=this.$refs.tab;this.contentTop=t.$el.clientHeight+"px",this.contentHeight=c.c.height-t.$el.clientHeight+"px",document.documentElement.scrollTop=document.body.scrollTop=0},created:function(){this.getBookings()}}),_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"bookings"}},[s("tab",{ref:"tab",attrs:{"line-width":3,"custom-bar-width":"100px","active-color":"#6595F4"},model:{value:t.swiperIndex,callback:function(e){t.swiperIndex=e},expression:"swiperIndex"}},[s("tab-item",{staticClass:"vux-center",on:{"on-item-click":function(e){t.getBookings("reset")}}},[t._v("未完成")]),t._v(" "),s("tab-item",{staticClass:"vux-center",on:{"on-item-click":function(e){t.getBookings("reset")}}},[t._v("已完成")])],1),t._v(" "),t.bookings&&0!==t.bookings.length?s("scroller",{staticStyle:{width:"100%"},style:{height:t.contentHeight,top:t.contentTop},attrs:{"on-refresh":t.refresh,"on-infinite":t.infinite,noDataText:""}},[s("div",{staticClass:"bookings-data"},[s("group",t._l(t.bookings,function(e){return s("cell-box",{key:e.id,attrs:{link:{path:"/booking/"+e.id}}},["未使用"!==e.status&&"1970.01.01 08:00"!==e.plan_start_at?s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"txt"},[s("p",{staticClass:"title"},[t._v("预约时间："+t._s(e.plan_start_at))]),t._v(" "),s("p",{staticClass:"title"},[t._v("预约时长："+t._s(e.service_length))]),t._v(" "),s("p",{staticClass:"title"},[t._v("咨询问题："+t._s(e.consulting_question))])]),t._v(" "),s("p",{staticClass:"time"},[t._v(t._s(e.updated_at))]),t._v(" "),s("div",{staticClass:"type",class:{"no-confirm":"待确认"===e.status}},[t._v(t._s(e.status))])]):"未使用"!==e.status&&"1970.01.01 08:00"===e.plan_start_at?s("div",{staticStyle:{width:"100%"}},[s("div",{staticClass:"unused-reservation"},[t._v("\n              您的【电话咨询服务（"+t._s(e.package.servicePackage.name)+"）】已取消。\n            ")]),t._v(" "),s("p",{staticClass:"time"},[t._v(t._s(e.updated_at))]),t._v(" "),s("div",{staticClass:"type"},[t._v(t._s(e.status))])]):s("div",[s("div",{staticClass:"unused-reservation"},[t._v("\n              您的电话咨询（"+t._s(e.service_length)+"电话咨询服务）还未使用，点击预约 >\n            ")]),t._v(" "),s("div",{staticClass:"time"},[t._v(t._s(e.created_at))])])])}))],1)]):s("div",{staticClass:"no-data"},[s("svg-icon",{staticClass:"no-data-icon",attrs:{"icon-class":"emptystate_img_advisory"}}),t._v(" "),s("p",{staticClass:"title"},[t._v("暂无相关记录")]),t._v(" "),s("p",{staticClass:"decs"},[t._v("绑定医生后，可向主治医生咨询")])],1)],1)},staticRenderFns:[]};var p=s("VU/8")(l,_,!1,function(t){s("LaH2")},null,null);e.default=p.exports},LaH2:function(t,e){}});